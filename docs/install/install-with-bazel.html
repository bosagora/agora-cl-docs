<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-139640266-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Agora-cl" href="/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script><title data-react-helmet="true">Build Agora-cl from source | Agora-cl</title><meta data-react-helmet="true" property="og:url" content="https://agora-cl-docs.bosagora.io/docs/install/install-with-bazel"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Build Agora-cl from source | Agora-cl"><meta data-react-helmet="true" name="description" content="Agora-cl can be installed on GNU/Linux, MacOS, and Arm64 using our build tool, Bazel. This page includes instructions for performing this method."><meta data-react-helmet="true" property="og:description" content="Agora-cl can be installed on GNU/Linux, MacOS, and Arm64 using our build tool, Bazel. This page includes instructions for performing this method."><link data-react-helmet="true" rel="shortcut icon" href="/img/bosagora-logo.png"><link data-react-helmet="true" rel="canonical" href="https://agora-cl-docs.bosagora.io/docs/install/install-with-bazel"><link data-react-helmet="true" rel="alternate" href="https://agora-cl-docs.bosagora.io/docs/install/install-with-bazel" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://agora-cl-docs.bosagora.io/docs/install/install-with-bazel" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9b7cbe7b.css">
<link rel="preload" href="/assets/js/runtime~main.bf2263fc.js" as="script">
<link rel="preload" href="/assets/js/main.a87cd8b8.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/getting-started"><img src="/img/bosagora-logo.png" alt="logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/bosagora-logo.png" alt="logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Agora-cl Documentation</b></a><a href="https://github.com/zeroone-boa/agora-cl/releases/tag/v3.1.1" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">agora_v3.1.1</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/install/install-with-script">Quick Install</a><a href="https://github.com/zeroone-boa/agora-cl" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://t.me/bosagora_eng" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1ZXk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Table of contents</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/install/install-with-script">Quickstart: Run a node</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/prepare-for-merge">Prepare for The Merge</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/security-best-practices">Security best practices</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/agora-cl-usage/parameters">Command-line options</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/monitoring/checking-status">Check node and validator status</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/troubleshooting/issues-errors">Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Advanced installation guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/install/install-with-docker">Install using Docker</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/install/install-with-bazel">Build from source</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">How-tos</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Concepts</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Developer wiki</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Misc</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq">Frequently asked questions</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/terminology">Glossary</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Build Agora-cl from source</h1></header><p>Agora-cl can be installed on GNU/Linux, MacOS, and Arm64 using our build tool, <a href="https://bazel.build" target="_blank" rel="noopener noreferrer">Bazel</a>. This page includes instructions for performing this method.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Not familiar with Bazel? Try our quickstart</h5></div><div class="admonition-content"><p>This guidance is targeted at users who are already comfortable with Bazel and staking. See our <a href="/docs/install/install-with-script">Quickstart</a> for beginner-friendly installation instructions.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="why-bazel"></a>Why Bazel?<a class="hash-link" href="#why-bazel" title="Direct link to heading">#</a></h2><p>Instead of using the <code>Go</code> tool to build Agora-cl, our team relies on the <a href="https://bazel.build" target="_blank" rel="noopener noreferrer">Bazel</a> build system used by major companies to manage monorepositories. Bazel provides reproducible builds and a sandboxed environment that ensures everyone building Agora-cl has the same experience and can build our entire project from a single command. For more detailed rationale on why Bazel, how it works in Agora-cl, and all important information about how exactly building from source works, read our rationale <a href="/docs/reading/bazel">here</a>.</p><div class="bazel-guide"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="review-system-requirements"></a>Review system requirements<a class="hash-link" href="#review-system-requirements" title="Direct link to heading">#</a></h2><table><tr><th>Minimum</th><th>Recommended</th></tr><tr><td><ul><li><strong>OS</strong>: 64-bit Linux, Mac OS X 10.14+, Windows 64-bit</li><li><strong>CPU</strong>: Intel Core i5â€“760 or AMD FX-8100 or better</li><li><strong>Memory</strong>: 8GB RAM</li><li><strong>Storage</strong>: SSD with 20GB+ available</li><li><strong>Internet</strong>: Broadband connection</li><li><strong>Software</strong>: The latest release of <a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer">Docker</a> installed.</li></ul></td><td><ul><li><strong>CPU</strong>: Intel Core i7â€“4770 or AMD FX-8310 or better</li><li><strong>Memory</strong>: 16GB RAM</li><li><strong>Storage</strong>: SSD with 100GB+ available</li></ul></td></tr></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dependencies"></a>Dependencies<a class="hash-link" href="#dependencies" title="Direct link to heading">#</a></h3><ul><li><a href="https://docs.bazel.build/versions/main/install-bazelisk.html" target="_blank" rel="noopener noreferrer">Bazelisk</a> this will automatically manage the version of <strong><em>Bazel</em></strong> required.</li><li>The <code>cmake</code> package installed</li><li>The <code>git</code> package installed</li><li><code>libssl-dev</code> installed</li><li><code>libgmp-dev</code> installed</li><li><code>libtinfo5</code> installed</li><li><code>libprotoc</code> version 3.14 installed</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="install-bazel-using-bazelisk"></a>Install Bazel using Bazelisk<a class="hash-link" href="#install-bazel-using-bazelisk" title="Direct link to heading">#</a></h2><p>Bazelisk is a launcher for Bazel which automatically downloads and installs an appropriate version of Bazel. Use Bazelisk to automtically manage the version of Bazel required.</p><p>You can install Bazelisk in multiple ways, including:</p><ul><li>npm install -g @bazel/bazelisk</li><li>Using a binary release for Linux, macOS, or Windows <a href="https://github.com/bazelbuild/bazelisk/releases" target="_blank" rel="noopener noreferrer">(Download binaries)</a></li><li>Using Homebrew on macOS</li><li>By compiling from source using Go: go get github.com/bazelbuild/bazelisk</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="install-agora-cl-using-bazel"></a>Install Agora-cl using Bazel<a class="hash-link" href="#install-agora-cl-using-bazel" title="Direct link to heading">#</a></h2><p>Clone Agora-cl&#x27;s <a href="https://github.com/zeroone-boa/agora-cl" target="_blank" rel="noopener noreferrer">main repository</a>. Make sure you switch to the latest version (the latest version number can be found from the <a href="https://github.com/zeroone-boa/agora-cl/releases" target="_blank" rel="noopener noreferrer">releases page</a>). Once cloned, enter the directory:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/zeroone-boa/agora-cl</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git checkout &lt;version&gt;</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd agora-cl</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Build both the Agora chain node and the validator client:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build //cmd/beacon-chain:beacon-chain --config=release</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build //cmd/validator:validator --config=release</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Bazel will automatically pull and install any dependencies as well, including Go and necessary compilers.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-an-execution-node"></a>Run an execution node<a class="hash-link" href="#run-an-execution-node" title="Direct link to heading">#</a></h2><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Knowledge Check</h5></div><div class="admonition-content"><p><strong>Not familiar with nodes, networks, and related terminology?</strong> Consider reading <a href="/docs/concepts/nodes-networks">Nodes and networks</a> before proceeding.</p></div></div><p>To run a Agora node, you&#x27;ll need access to an execution node. See <a href="/docs/execution-node/configuring-for-agora-cl">Configure execution node</a> for detailed instructions if you don&#x27;t already have an execution node configured.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-a-agora-node"></a>Run a Agora node<a class="hash-link" href="#run-a-agora-node" title="Direct link to heading">#</a></h2><p>Note: &lt;YOUR_ETH_EXECUTION_NODE_ENDPOINT&gt; is in the format of an http endpoint such as <code>http://host:port</code> (ex: <code>http://localhost:8545</code> for geth) or an IPC path such as <code>/path/to/geth.ipc</code>.</p><div class="quickstart-tabs"><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs tabgroup-with-label os-tabgroup"><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Operating system:</li><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Linux, MacOS, Arm64</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Windows</li></ul><div class="margin-vert--md"><div role="tabpanel" hidden="" class="unclickable-element"></div><div role="tabpanel"></div><div role="tabpanel" hidden=""></div></div></div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs tabgroup-with-label network-tabgroup"><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Network:</li><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Mainnet</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Testnet</li></ul><div class="margin-vert--md"><div role="tabpanel" hidden="" class="unclickable-element"></div><div role="tabpanel"></div><div role="tabpanel" hidden=""></div></div></div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs tabgroup-with-label hidden-in-docker-guide el-tabgroup"><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Execution client:</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Agora-el</li></ul><div class="margin-vert--md"><div role="tabpanel" hidden="" class="unclickable-element"></div><div role="tabpanel" hidden=""></div></div></div><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs tabgroup-with-label hidden-in-jwt-guide hidden-in-docker-guide enbn-tabgroup"><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">EN-BN connection:</li><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">HTTP-JWT</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">IPC</li></ul><div class="margin-vert--md"><div role="tabpanel" hidden="" class="unclickable-element"></div><div role="tabpanel"></div><div role="tabpanel" hidden=""></div></div></div></div><div class="hide-tabs"><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Mainnet</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Testnet</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel run //beacon-chain --config=release -- --execution-endpoint=&lt;YOUR_ETH_EXECUTION_NODE_ENDPOINT&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><p>Download the Testnet genesis state from <a href="https://agora-testnet.s3.ap-southeast-1.amazonaws.com/testnet-genesis.ssz" target="_blank" rel="noopener noreferrer">Github</a> to a local file. Then issue the following command:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel run //beacon-chain --config=release -- --execution-endpoint=&lt;YOUR_ETH_EXECUTION_NODE_ENDPOINT&gt; --testnet --genesis-state=/path/to/genesis.ssz</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><p>Download the Sepolia genesis state from <a href="https://github.com/eth-clients/merge-testnets/blob/main/sepolia/genesis.ssz" target="_blank" rel="noopener noreferrer">Github</a> to a local file, then run</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel run //beacon-chain --config=release -- --execution-endpoint=&lt;YOUR_ETH_EXECUTION_NODE_ENDPOINT&gt; --sepolia --genesis-state=/path/to/genesis.ssz</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><p>Download the Ropsten genesis state from <a href="https://github.com/eth-clients/merge-testnets/blob/main/ropsten-beacon-chain/genesis.ssz" target="_blank" rel="noopener noreferrer">Github</a> to a local file, then run</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel run //beacon-chain --config=release -- --execution-endpoint=&lt;YOUR_ETH_EXECUTION_NODE_ENDPOINT&gt; --ropsten --genesis-state=/path/to/genesis.ssz</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="run-a-validator"></a>Run a validator<a class="hash-link" href="#run-a-validator" title="Direct link to heading">#</a></h2><p>Ensure that your Agora node is fully synced before proceeding. See <a href="/docs/monitoring/checking-status">Check node and validator status</a> for detailed status-checking instructions.</p><p>Navigate to the <a href="https://agora-staking.bosagora.org/summary" target="_blank" rel="noopener noreferrer">Mainnet Launchpad</a> and follow the instructions. If you want to participate in the <strong>testnet</strong>, you can navigate to the <a href="https://goerli.launchpad.ethereum.org/summary/" target="_blank" rel="noopener noreferrer">Testnet</a> or <a href="https://ropsten.launchpad.ethereum.org/summary" target="_blank" rel="noopener noreferrer">Ropsten</a> launchpads.</p><div class="admonition admonition-danger alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Exercise extreme caution</h5></div><div class="admonition-content"><p>The correct address for the launchpad is <a href="https://agora-staking.bosagora.org" target="_blank" rel="noopener noreferrer">https://agora-staking.bosagora.org</a> and the only, official validator deposit contract is <a href="https://etherscan.io/address/0x00000000219ab540356cbb839cbe05303d7705fa" target="_blank" rel="noopener noreferrer">0x00000000219ab540356cbb839cbe05303d7705fa</a>. Don&#x27;t send BOA directly to the contract - use the Ethereum.org launchpad instead.</p></div></div><p>Throughout the process, you&#x27;ll be asked to generate new validator credentials using the official Ethereum deposit command-line-tool <a href="https://github.com/zeroone-boa/agora-deposit-cli" target="_blank" rel="noopener noreferrer">here</a>. Make sure you use the <code>mainnet</code> option when generating keys with the deposit CLI. During the process, you will have generated a <code>validator_keys</code> folder under the <code>agora-deposit-cli</code> directory. Copy the path to the <code>validator_keys</code> folder under the <code>agora-deposit-cli</code> directory you created during the launchpad process. For example, if your agora-deposit-cli installation is in your <code>$HOME</code> (or <code>%LOCALAPPDATA%</code> on Windows) directory, you can then run the following command to import your keys:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel run //validator:validator -- accounts import --keys-dir=$HOME/agora-deposit-cli/validator_keys --accept-terms-of-use</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Next, open a second terminal window and issue the followimg command to start your validator.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel run //validator --config=release</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="wait-for-your-validator-assignment"></a>Wait for your validator assignment<a class="hash-link" href="#wait-for-your-validator-assignment" title="Direct link to heading">#</a></h2><p>Please note it will take time for nodes in the network to process a deposit. To understand the timeline of becoming a validator and how long it takes on average, see <a href="https://kb.beaconcha.in/ethereum-2.0-depositing" target="_blank" rel="noopener noreferrer">this knowledge base</a>. In the meantime, leave both terminal windows open and running; once the validator is activated by the ETH2 network, it will immediately begin receiving tasks and performing its responsibilities. If the eth2 chain has not yet started, the validator will be ready to start proposing blocks and signing votes as soon as the genesis time is reached.</p><p>To check on the status of your validator, we recommend checking out the popular block explorers: <a href="https://beaconcha.in" target="_blank" rel="noopener noreferrer">beaconcha.in</a> by Bitfly and <a href="https://beacon.etherscan.io" target="_blank" rel="noopener noreferrer">beacon.etherscan.io</a> by the Etherscan team.</p><p><img src="https://i.imgur.com/CDNc6Ft.png" alt="image"></p></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="advanced-build-docker-images-from-source"></a>Advanced: Build Docker images from source<a class="hash-link" href="#advanced-build-docker-images-from-source" title="Direct link to heading">#</a></h2><p>We use Bazel to build the Docker images for Agora-cl as well. This section outlines comprehensive instructions on how to build them by yourself, run them in Docker, and push to an image registry if desired. In particular, we use <a href="https://github.com/bazelbuild/rules_docker" target="_blank" rel="noopener noreferrer"><code>bazel rules docker</code></a> which provides us the ability to specify a base, barebones image, and essentially builds our binary and creates a Docker container as a simple wrapper over our binaries.</p><p>We do not write our own Dockerfiles, as Bazel provides us a more sandboxed, simple experience with all of its benefits. To see an example use of <code>bazel rules docker</code> for how we build a particular package, see <a href="https://github.com/zeroone-boa/agora-cl/blob/aa389c82a157008741450ba1e04d898924734432/tools/bootnode/BUILD.bazel#L36" target="_blank" rel="noopener noreferrer">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="dependencies-needed"></a>Dependencies needed<a class="hash-link" href="#dependencies-needed" title="Direct link to heading">#</a></h3><ul><li>All specified dependencies for building with Bazel <a href="/docs/install/install-with-bazel#dependencies">here</a></li><li>Python installed and available in your computer</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="build-process"></a>Build process<a class="hash-link" href="#build-process" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="regular-docker-images"></a>Regular Docker images<a class="hash-link" href="#regular-docker-images" title="Direct link to heading">#</a></h4><p>At the moment, Agora-cl docker images can only be built on <strong>Linux</strong> operating systems. The standard images are very thin wrappers around the Agora-cl beacon-chain and validator binaries, and do not contain any other typical components of Docker images such as a bash shell. These are the Docker images we ship to all users, and you can build them yourself as follows:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build //beacon-chain:image_bundle --config</span><span class="token operator">=</span><span class="token plain">release</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build //validator:image_bundle --config</span><span class="token operator">=</span><span class="token plain">release</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The tags for the images are specified <a href="https://github.com/zeroone-boa/agora-cl/blob/ff329df808ad68fbe79d11c73121fa6a7a0c0f29/cmd/beacon-chain/BUILD.bazel#L58" target="_blank" rel="noopener noreferrer">here</a> for the beacon-chain and <a href="https://github.com/zeroone-boa/agora-cl/blob/ff329df808ad68fbe79d11c73121fa6a7a0c0f29/cmd/validator/BUILD.bazel#L59" target="_blank" rel="noopener noreferrer">here</a> for the validator. The default image tags for these images are:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bosagora/agora-cl-node:latest</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bosagora/agora-cl-validator:latest</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You can edit these in the links above to your liking.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="alpine-images"></a>Alpine images<a class="hash-link" href="#alpine-images" title="Direct link to heading">#</a></h4><p>Agora-cl also provides Alpine images built using:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build //beacon-chain:image_bundle_alpine --config</span><span class="token operator">=</span><span class="token plain">release</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build //validator:image_bundle_alpine --config</span><span class="token operator">=</span><span class="token plain">release</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="debug-images"></a>Debug images<a class="hash-link" href="#debug-images" title="Direct link to heading">#</a></h4><p>Agora-cl also provides debug images built using:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build //beacon-chain:image_bundle_debug --config</span><span class="token operator">=</span><span class="token plain">release</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build //validator:image_bundle_debug --config</span><span class="token operator">=</span><span class="token plain">release</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="running-images"></a>Running images<a class="hash-link" href="#running-images" title="Direct link to heading">#</a></h3><p>You can load the images into your local Docker daemon by first building a <code>.tar</code> file as follows for your desired image bundle:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build cmd/beacon-chain:image_bundle.tar</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel build cmd/validator:image_bundle.tar</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then, you can load it into Docker with:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker load -i bazel-bin/my/image/helloworld.tar</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>For example, you may see output such as this:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">docker load -i bazel-bin/cmd/beacon-chain/image_bundle.tar</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fd6fa224ea91: Loading layer [==================================================&gt;]  3.031MB/3.031MB</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">87c9f1582ca0: Loading layer [==================================================&gt;]  15.44MB/15.44MB</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">231bdbae9aea: Loading layer [==================================================&gt;]  1.966MB/1.966MB</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">a6dc470c72b7: Loading layer [==================================================&gt;]  10.24kB/10.24kB</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">a0de9c673ef6: Loading layer [==================================================&gt;]  56.37MB/56.37MB</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">84ff92691f90: Loading layer [==================================================&gt;]  10.24kB/10.24kB</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Loaded image: bosagora/agora-cl-node:latest</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Loaded image: zeroone-boa/agora-cl-beacon-chain:latest</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="pushing-to-a-container-registry"></a>Pushing to a container registry<a class="hash-link" href="#pushing-to-a-container-registry" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="authentication"></a>Authentication<a class="hash-link" href="#authentication" title="Direct link to heading">#</a></h4><p>You can use these rules to access private images using standard Docker
authentication methods.  e.g. to utilize the <a href="https://gcr.io" target="_blank" rel="noopener noreferrer">Google Container Registry</a>. See
<a href="https://cloud.google.com/container-registry/docs/advanced-authentication" target="_blank" rel="noopener noreferrer">here</a> for authentication methods.</p><p>See:</p><ul><li><a href="https://github.com/awslabs/amazon-ecr-credential-helper" target="_blank" rel="noopener noreferrer">Amazon ECR Docker Credential Helper</a></li><li><a href="https://github.com/Azure/acr-docker-credential-helper" target="_blank" rel="noopener noreferrer">Azure Docker Credential Helper</a></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="push"></a>Push<a class="hash-link" href="#push" title="Direct link to heading">#</a></h4><p>To push the actual images, you do not need to build the image bundle beforehand. You can do a simple:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly text"><pre tabindex="0" class="prism-code language-text codeBlock_23N8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel run //beacon-chain:push_images --config=release</span></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">bazel run //validator:push_images --config=release</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Which will deploy all images with the tags specified in <a href="https://github.com/zeroone-boa/agora-cl/blob/ff329df808ad68fbe79d11c73121fa6a7a0c0f29/cmd/beacon-chain/BUILD.bazel#L58" target="_blank" rel="noopener noreferrer">here</a> for the beacon-chain and <a href="https://github.com/zeroone-boa/agora-cl/blob/ff329df808ad68fbe79d11c73121fa6a7a0c0f29/cmd/validator/BUILD.bazel#L59" target="_blank" rel="noopener noreferrer">here</a> for the validator.</p><p>By default, this will deploy to Bosagora dockerhub organisation: <code>bosagora</code>, which you will not have authentication access to, so make sure you edit the image tags to your appropriate registry and authenticate as needed.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/zeroone-boa/agora-cl-docs/edit/master/website/docs/install/install-with-bazel.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/install/install-with-docker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Install using Docker</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/execution-node/fee-recipient"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configure Fee Recipient Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-bazel" class="table-of-contents__link">Why Bazel?</a></li><li><a href="#review-system-requirements" class="table-of-contents__link">Review system requirements</a><ul><li><a href="#dependencies" class="table-of-contents__link">Dependencies</a></li></ul></li><li><a href="#install-bazel-using-bazelisk" class="table-of-contents__link">Install Bazel using Bazelisk</a></li><li><a href="#install-agora-cl-using-bazel" class="table-of-contents__link">Install Agora-cl using Bazel</a></li><li><a href="#run-an-execution-node" class="table-of-contents__link">Run an execution node</a></li><li><a href="#run-a-agora-node" class="table-of-contents__link">Run a Agora node</a></li><li><a href="#run-a-validator" class="table-of-contents__link">Run a validator</a></li><li><a href="#wait-for-your-validator-assignment" class="table-of-contents__link">Wait for your validator assignment</a></li><li><a href="#advanced-build-docker-images-from-source" class="table-of-contents__link">Advanced: Build Docker images from source</a><ul><li><a href="#dependencies-needed" class="table-of-contents__link">Dependencies needed</a></li><li><a href="#build-process" class="table-of-contents__link">Build process</a></li><li><a href="#running-images" class="table-of-contents__link">Running images</a></li><li><a href="#pushing-to-a-container-registry" class="table-of-contents__link">Pushing to a container registry</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a class="footerLogoLink_MyFc" href="/docs/getting-started"><img src="/img/Agora-cl.svg" alt="Agora-cl Docs" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/Agora-cl.svg" alt="Agora-cl Docs" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright Â© 2022 Bosagora, Validator Deposit Contract 0xXXX</div></div></div></footer></div>
<script src="/assets/js/runtime~main.bf2263fc.js"></script>
<script src="/assets/js/main.a87cd8b8.js"></script>
</body>
</html>