"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9e3],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=c(a),m=r,g=u["".concat(s,".").concat(m)]||u[m]||p[m]||l;return a?n.createElement(g,o(o({ref:t},d),{},{components:a})):n.createElement(g,o({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,o=new Array(l);o[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<l;c++)o[c]=a[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},1262:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(7294),r=a(2263);const l=function(e){var t=e.children,a=e.fallback;return(0,r.Z)().isClient&&null!=t?n.createElement(n.Fragment,null,t()):a||null}},5505:(e,t,a)=>{a.d(t,{M:()=>l});var n=a(7294),r=a(1262),l=function(e){var t=e.commaDelimitedContributors,a=e.lastVerifiedDateString,l=e.lastVerifiedVersionString,o={Chris:"hewison-chris"},i=function(e){return n.createElement("a",{class:"header-badge",href:"https://github.com/"+o[e]},n.createElement("span",{class:"badge-avatar",style:{backgroundImage:"url('https://avatars.githubusercontent.com/"+o[e]+"')"}}),n.createElement("span",{class:"badge-label"},e))};return n.createElement(r.Z,null,(function(){return n.createElement("div",{class:"header-badges"},null!=t?t.split(",").map(i):null,function(e,t){if(null!=e&&null!=t)return n.createElement("a",{class:"header-badge"},n.createElement("span",{class:"badge-avatar emoji-avatar"},"\u2714\ufe0f"),n.createElement("span",{class:"badge-label"},"Last verified on ",n.createElement("strong",null,e)," using Agora-cl ",t))}(a,l),n.createElement("a",{class:"header-badge",href:"https://github.com/Bosagora/documentation/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},n.createElement("span",{class:"badge-avatar emoji-avatar"},"\u270f\ufe0f"),n.createElement("span",{class:"badge-label"},"Request an update")))}))}},1144:(e,t,a)=>{a.d(t,{M:()=>l});var n=a(7294),r=a(1262),l=function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),n.createElement(r.Z,null,(function(){return n.createElement("div",{class:"update-request"},n.createElement("a",{href:"https://https://github.com/zeroone-boa/agora-cl-docs/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},"\ud83d\udc3c Request an update"))}))}},6090:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>d,default:()=>g,frontMatter:()=>c,metadata:()=>p,toc:()=>u});var n=a(7462),r=a(3366),l=(a(7294),a(3905)),o=a(5505),i=a(1144),s=["components"],c={id:"nondeterministic",title:"Import keys into a Agora-cl wallet",sidebar_label:"Import keys into a Agora-cl wallet"},d=void 0,p={unversionedId:"wallet/nondeterministic",id:"wallet/nondeterministic",isDocsHomePage:!1,title:"Import keys into a Agora-cl wallet",description:"Background",source:"@site/docs/wallet/nondeterministic.md",sourceDirName:"wallet",slug:"/wallet/nondeterministic",permalink:"/docs/wallet/nondeterministic",editUrl:"https://github.com/zeroone-boa/agora-cl-docs/edit/master/website/docs/wallet/nondeterministic.md",version:"current",frontMatter:{id:"nondeterministic",title:"Import keys into a Agora-cl wallet",sidebar_label:"Import keys into a Agora-cl wallet"},sidebar:"docs",previous:{title:"Configure a remote signing wallet",permalink:"/docs/wallet/remote"},next:{title:"Maintain validator uptime with systemd or Docker",permalink:"/docs/advanced/maintaining-uptime"}},u=[{value:"Background",id:"background",children:[]},{value:"Usage",id:"usage",children:[{value:"Wallet creation",id:"wallet-creation",children:[]},{value:"Import validator accounts",id:"import-validator-accounts",children:[]},{value:"List validator accounts",id:"list-validator-accounts",children:[]},{value:"Backup validator accounts",id:"backup-validator-accounts",children:[]}]}],m={toc:u};function g(e){var t=e.components,a=(0,r.Z)(e,s);return(0,l.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)(o.M,{mdxType:"HeaderBadgesWidget"}),(0,l.kt)("h2",{id:"background"},"Background"),(0,l.kt)("p",null,"You can import existing EIP-2335 keystore files (such as those generated by the ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-deposit-cli"},"agora-deposit-cli"),") into Agora-cl. Importing your own keys is a recommended security best practice because it allows you to create a mnemonic (and derived validator keys) using software that you choose. This makes it easy for you to keep your sensitive mnemonic phrase physically isolated away from your validator machine."),(0,l.kt)("p",null,"Validator private keys are encrypted with a strong wallet password using the ",(0,l.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-2335"},"EIP-2335")," ",(0,l.kt)("inlineCode",{parentName:"p"},"keystore.json")," standard. Your ",(0,l.kt)("inlineCode",{parentName:"p"},"keystore.json")," file is usually available in your wallet's directory, often labeled ",(0,l.kt)("inlineCode",{parentName:"p"},"all-accounts.keystore.json"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"wallet-dir/\n    accounts/\n        all-accounts.keystore.json\n")),(0,l.kt)("p",null,"Your password to unlock this file is ",(0,l.kt)("strong",{parentName:"p"},"not")," stored on disk by Agora-cl, but you will need to provide it whenever you run the validator."),(0,l.kt)("h2",{id:"usage"},"Usage"),(0,l.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Running Windows?")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"The commands in this document use ",(0,l.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", a convenient script built for Linux and MacOS environments. Replace ",(0,l.kt)("inlineCode",{parentName:"p"},"agora-cl.sh")," with ",(0,l.kt)("inlineCode",{parentName:"p"},"agora-cl.bat")," if you're on Windows."))),(0,l.kt)("h3",{id:"wallet-creation"},"Wallet creation"),(0,l.kt)("p",null,"A non-HD wallet is the most basic sort of wallet, storing all information on-disk. This approach makes it trivial to import, export and list all associated accounts within the wallet. To start using the non-HD wallet, you can create a new wallet using:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"./agora-cl.sh validator wallet create\n")),(0,l.kt)("p",null,"Then select ",(0,l.kt)("strong",{parentName:"p"},"non-HD")," wallet when prompted. You can also create a wallet ",(0,l.kt)("strong",{parentName:"p"},"non-interactively")," by using the following command line flags, which are also viewable by typing `./agora-cl.sh validator wallet create --help."),(0,l.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"You'll need to set a ",(0,l.kt)("strong",{parentName:"p"},"strong")," password for your wallet, containing at least 1 uppercase letter, 1 number, a special character, and be at least 8 characters long. Any unicode characters can be used for passwords."))),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Flag"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Usage"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--wallet-dir")),(0,l.kt)("td",{parentName:"tr",align:"left"},'Path to a wallet directory (default: "$HOME/AgoraValidators/agora-cl-wallet-v2")')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--wallet-password-file")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Path to a file containing your wallet's password for automatic unlocking")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--keymanager-kind")),(0,l.kt)("td",{parentName:"tr",align:"left"},'Type of wallet to create, either "imported", "derived, or "remote" (default "derived")')))),(0,l.kt)("p",null,"Here's a full example on how to create a non-HD wallet at ",(0,l.kt)("inlineCode",{parentName:"p"},"$HOME/mynonhdwallet"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"./agora-cl.sh validator wallet create --wallet-dir=$HOME/nonhdwallet --wallet-password-file=/path/to/password.txt --keymanager-kind=imported\n")),(0,l.kt)("h3",{id:"import-validator-accounts"},"Import validator accounts"),(0,l.kt)("p",null,"You can import validator keystores from a separate folder into your wallet with the following command"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"./agora-cl.sh validator accounts import --keys-dir=/path/to/keystores\n")),(0,l.kt)("p",null,"This will import all files that are valid ",(0,l.kt)("a",{parentName:"p",href:"https://eips.ethereum.org/EIPS/eip-2335"},"EIP-2335")," keystores, such as those generated by the official ",(0,l.kt)("a",{parentName:"p",href:"https://agora-staking.bosagora.org/"},"eth2 deposit launchpad"),"'s command-line tool. The files you are importing must have the prefix ",(0,l.kt)("inlineCode",{parentName:"p"},"keystore-"),"."),(0,l.kt)("h3",{id:"list-validator-accounts"},"List validator accounts"),(0,l.kt)("p",null,"You can list all validator accounts in your non-HD wallet using the following command"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"./agora-cl.sh validator accounts list\n")),(0,l.kt)("p",null,"Where you'll see the following output"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"INFO accounts: (wallet path) /Users/johndoe/Library/AgoraValidators/agora-cl-wallet-v2\n\nShowing **1** validator account\n\npersonally-conscious-echidna\n[public key] 0x971d780edfe98743f41cdcdba8521548fc343ffcd958e90968c4f1cc5a2e9b6ea11a984397c34c6cc13e9d4e8d14ce1e\n[created at] 16 minutes ago\n")),(0,l.kt)("p",null,"You can also run the ",(0,l.kt)("inlineCode",{parentName:"p"},"accounts list")," command ",(0,l.kt)("strong",{parentName:"p"},"non-interactively")," by using the following command line flags, which are also viewable by typing `./agora-cl.sh validator accounts list --help."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Flag"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Usage"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--wallet-dir")),(0,l.kt)("td",{parentName:"tr",align:"left"},'Path to a wallet directory (default: "$HOME/AgoraValidators/agora-cl-wallet-v2")')),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--wallet-password-file")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Path to a plain-text file containing your wallet password")))),(0,l.kt)("h3",{id:"backup-validator-accounts"},"Backup validator accounts"),(0,l.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,l.kt)("div",{parentName:"div",className:"admonition-heading"},(0,l.kt)("h5",{parentName:"div"},(0,l.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,l.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,l.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Be very careful using validator account backups!")),(0,l.kt)("div",{parentName:"div",className:"admonition-content"},(0,l.kt)("p",{parentName:"div"},"If you have made a validator account backup and plan to use it on a different instance,\nplease ",(0,l.kt)("strong",{parentName:"p"},"confirm")," that you do not run multiple instances of the same validator twice.\nThis ",(0,l.kt)("em",{parentName:"p"},"will")," result in slashing and major loss of user funds."))),(0,l.kt)("p",null,"You can backup validator accounts from your imported wallet using the following command."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"./agora-cl.sh validator accounts backup\n")),(0,l.kt)("p",null,"You can also run the ",(0,l.kt)("inlineCode",{parentName:"p"},"accounts backup")," command ",(0,l.kt)("strong",{parentName:"p"},"non-interactively")," by using the following command line flags, which are also viewable by typing `./agora-cl.sh validator accounts backup --help."),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Flag"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Usage"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--wallet-dir")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Path to a wallet directory on-disk for Agora-cl validator accounts. (default: $HOME/AgoraValidators/agora-cl-wallet-v2)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--wallet-password-file")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Path to a plain-text, .txt file containing your wallet password.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--backup-dir")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Path to a directory where accounts will be backed up into a zip file. (default: $HOME/AgoraValidators/)")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--backup-public-keys")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Comma-separated list of public key hex strings to specify which validator accounts to backup.")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"--backup-password-file")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Path to a plain-text, .txt file containing the desired password for your backed up accounts.")))),(0,l.kt)(i.M,{mdxType:"RequestUpdateWidget"}))}g.isMDXComponent=!0}}]);