"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1389],{4334:(e,a,t)=>{function n(e){var a,t,l="";if("string"==typeof e||"number"==typeof e)l+=e;else if("object"==typeof e)if(Array.isArray(e))for(a=0;a<e.length;a++)e[a]&&(t=n(e[a]))&&(l&&(l+=" "),l+=t);else for(a in e)e[a]&&(l&&(l+=" "),l+=a);return l}t.d(a,{Z:()=>l});const l=function(){for(var e,a,t=0,l="";t<arguments.length;)(e=arguments[t++])&&(a=n(e))&&(l&&(l+=" "),l+=a);return l}},3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>m});var n=t(7294);function l(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){l(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function r(e,a){if(null==e)return{};var t,n,l=function(e,a){if(null==e)return{};var t,n,l={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(l[t]=e[t]);return l}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var s=n.createContext({}),c=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},d=function(e){var a=c(e.components);return n.createElement(s.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},p=n.forwardRef((function(e,a){var t=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,d=r(e,["components","mdxType","originalType","parentName"]),p=c(t),m=l,h=p["".concat(s,".").concat(m)]||p[m]||u[m]||i;return t?n.createElement(h,o(o({ref:a},d),{},{components:t})):n.createElement(h,o({ref:a},d))}));function m(e,a){var t=arguments,l=a&&a.mdxType;if("string"==typeof e||l){var i=t.length,o=new Array(i);o[0]=p;var r={};for(var s in a)hasOwnProperty.call(a,s)&&(r[s]=a[s]);r.originalType=e,r.mdxType="string"==typeof e?e:l,o[1]=r;for(var c=2;c<i;c++)o[c]=t[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},1262:(e,a,t)=>{t.d(a,{Z:()=>i});var n=t(7294),l=t(2263);const i=function(e){var a=e.children,t=e.fallback;return(0,l.Z)().isClient&&null!=a?n.createElement(n.Fragment,null,a()):t||null}},8215:(e,a,t)=>{t.d(a,{Z:()=>l});var n=t(7294);const l=function(e){var a=e.children,t=e.hidden,l=e.className;return n.createElement("div",{role:"tabpanel",hidden:t,className:l},a)}},5064:(e,a,t)=>{t.d(a,{Z:()=>u});var n=t(7294),l=t(9443);const i=function(){var e=(0,n.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e};var o=t(4334);const r="tabItem_vU9c",s="tabItemActive_cw6a";var c=37,d=39;const u=function(e){var a=e.lazy,t=e.block,l=e.defaultValue,u=e.values,p=e.groupId,m=e.className,h=i(),g=h.tabGroupChoices,b=h.setTabGroupChoices,k=(0,n.useState)(l),f=k[0],v=k[1],y=n.Children.toArray(e.children),N=[];if(null!=p){var w=g[p];null!=w&&w!==f&&u.some((function(e){return e.value===w}))&&v(w)}var T=function(e){var a=e.currentTarget,t=N.indexOf(a),n=u[t].value;v(n),null!=p&&(b(p,n),setTimeout((function(){var e,t,n,l,i,o,r,c;(e=a.getBoundingClientRect(),t=e.top,n=e.left,l=e.bottom,i=e.right,o=window,r=o.innerHeight,c=o.innerWidth,t>=0&&i<=c&&l<=r&&n>=0)||(a.scrollIntoView({block:"center",behavior:"smooth"}),a.classList.add(s),setTimeout((function(){return a.classList.remove(s)}),2e3))}),150))},z=function(e){var a,t;switch(e.keyCode){case d:var n=N.indexOf(e.target)+1;t=N[n]||N[0];break;case c:var l=N.indexOf(e.target)-1;t=N[l]||N[N.length-1]}null==(a=t)||a.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":t},m)},u.map((function(e){var a=e.value,t=e.label;return n.createElement("li",{role:"tab",tabIndex:f===a?0:-1,"aria-selected":f===a,className:(0,o.Z)("tabs__item",r,{"tabs__item--active":f===a}),key:a,ref:function(e){return N.push(e)},onKeyDown:z,onFocus:T,onClick:T},t)}))),a?(0,n.cloneElement)(y.filter((function(e){return e.props.value===f}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},y.map((function(e,a){return(0,n.cloneElement)(e,{key:a,hidden:e.props.value!==f})}))))}},9443:(e,a,t)=>{t.d(a,{Z:()=>n});const n=(0,t(7294).createContext)(void 0)},5505:(e,a,t)=>{t.d(a,{M:()=>i});var n=t(7294),l=t(1262),i=function(e){var a=e.commaDelimitedContributors,t=e.lastVerifiedDateString,i=e.lastVerifiedVersionString,o={Chris:"hewison-chris"},r=function(e){return n.createElement("a",{class:"header-badge",href:"https://github.com/"+o[e]},n.createElement("span",{class:"badge-avatar",style:{backgroundImage:"url('https://avatars.githubusercontent.com/"+o[e]+"')"}}),n.createElement("span",{class:"badge-label"},e))};return n.createElement(l.Z,null,(function(){return n.createElement("div",{class:"header-badges"},null!=a?a.split(",").map(r):null,function(e,a){if(null!=e&&null!=a)return n.createElement("a",{class:"header-badge"},n.createElement("span",{class:"badge-avatar emoji-avatar"},"\u2714\ufe0f"),n.createElement("span",{class:"badge-label"},"Last verified on ",n.createElement("strong",null,e)," using Agora-cl ",a))}(t,i),n.createElement("a",{class:"header-badge",href:"https://github.com/Bosagora/documentation/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},n.createElement("span",{class:"badge-avatar emoji-avatar"},"\u270f\ufe0f"),n.createElement("span",{class:"badge-label"},"Request an update")))}))}},1144:(e,a,t)=>{t.d(a,{M:()=>i});var n=t(7294),l=t(1262),i=function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),n.createElement(l.Z,null,(function(){return n.createElement("div",{class:"update-request"},n.createElement("a",{href:"https://https://github.com/zeroone-boa/agora-cl-docs/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},"\ud83d\udc3c Request an update"))}))}},6275:(e,a,t)=>{t.r(a),t.d(a,{contentTitle:()=>m,default:()=>k,frontMatter:()=>p,metadata:()=>h,toc:()=>g});var n=t(7462),l=t(3366),i=(t(7294),t(3905)),o=t(5064),r=t(8215),s=t(5505),c=t(610),d=t(1144),u=["components"],p={id:"install-with-bazel",title:"Build Agora-cl from source",sidebar_label:"Build from source"},m=void 0,h={unversionedId:"install/install-with-bazel",id:"install/install-with-bazel",isDocsHomePage:!1,title:"Build Agora-cl from source",description:"Agora-cl can be installed on GNU/Linux, MacOS, and Arm64 using our build tool, Bazel. This page includes instructions for performing this method.",source:"@site/docs/install/install-with-bazel.md",sourceDirName:"install",slug:"/install/install-with-bazel",permalink:"/docs/install/install-with-bazel",editUrl:"https://github.com/zeroone-boa/agora-cl-docs/edit/master/website/docs/install/install-with-bazel.md",version:"current",frontMatter:{id:"install-with-bazel",title:"Build Agora-cl from source",sidebar_label:"Build from source"},sidebar:"docs",previous:{title:"Install using Docker",permalink:"/docs/install/install-with-docker"},next:{title:"Configure Fee Recipient",permalink:"/docs/execution-node/fee-recipient"}},g=[{value:"Why Bazel?",id:"why-bazel",children:[]},{value:"Review system requirements",id:"review-system-requirements",children:[{value:"Dependencies",id:"dependencies",children:[]}]},{value:"Install Bazel using Bazelisk",id:"install-bazel-using-bazelisk",children:[]},{value:"Install Agora-cl using Bazel",id:"install-agora-cl-using-bazel",children:[]},{value:"Run an execution node",id:"run-an-execution-node",children:[]},{value:"Run a Agora node",id:"run-a-agora-node",children:[]},{value:"Run a validator",id:"run-a-validator",children:[]},{value:"Wait for your validator assignment",id:"wait-for-your-validator-assignment",children:[]},{value:"Advanced: Build Docker images from source",id:"advanced-build-docker-images-from-source",children:[{value:"Dependencies needed",id:"dependencies-needed",children:[]},{value:"Build process",id:"build-process",children:[]},{value:"Running images",id:"running-images",children:[]},{value:"Pushing to a container registry",id:"pushing-to-a-container-registry",children:[]}]}],b={toc:g};function k(e){var a=e.components,t=(0,l.Z)(e,u);return(0,i.kt)("wrapper",(0,n.Z)({},b,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)(s.M,{mdxType:"HeaderBadgesWidget"}),(0,i.kt)("p",null,"Agora-cl can be installed on GNU/Linux, MacOS, and Arm64 using our build tool, ",(0,i.kt)("a",{parentName:"p",href:"https://bazel.build"},"Bazel"),". This page includes instructions for performing this method."),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Not familiar with Bazel? Try our quickstart")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This guidance is targeted at users who are already comfortable with Bazel and staking. See our ",(0,i.kt)("a",{parentName:"p",href:"/docs/install/install-with-script"},"Quickstart")," for beginner-friendly installation instructions."))),(0,i.kt)("h2",{id:"why-bazel"},"Why Bazel?"),(0,i.kt)("p",null,"Instead of using the ",(0,i.kt)("inlineCode",{parentName:"p"},"Go")," tool to build Agora-cl, our team relies on the ",(0,i.kt)("a",{parentName:"p",href:"https://bazel.build"},"Bazel")," build system used by major companies to manage monorepositories. Bazel provides reproducible builds and a sandboxed environment that ensures everyone building Agora-cl has the same experience and can build our entire project from a single command. For more detailed rationale on why Bazel, how it works in Agora-cl, and all important information about how exactly building from source works, read our rationale ",(0,i.kt)("a",{parentName:"p",href:"/docs/reading/bazel"},"here"),"."),(0,i.kt)("div",{class:"bazel-guide"},(0,i.kt)("h2",{id:"review-system-requirements"},"Review system requirements"),(0,i.kt)("table",null,(0,i.kt)("tr",null,(0,i.kt)("th",null,"Minimum"),(0,i.kt)("th",null,"Recommended")),(0,i.kt)("tr",null,(0,i.kt)("td",null,(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("strong",null,"OS"),": 64-bit Linux, Mac OS X 10.14+, Windows 64-bit"),(0,i.kt)("li",null,(0,i.kt)("strong",null,"CPU"),": Intel Core i5\u2013760 or AMD FX-8100 or better"),(0,i.kt)("li",null,(0,i.kt)("strong",null,"Memory"),": 8GB RAM"),(0,i.kt)("li",null,(0,i.kt)("strong",null,"Storage"),": SSD with 20GB+ available"),(0,i.kt)("li",null,(0,i.kt)("strong",null,"Internet"),": Broadband connection"),(0,i.kt)("li",null,(0,i.kt)("strong",null,"Software"),": The latest release of ",(0,i.kt)("a",{href:"https://docs.docker.com/install/"},"Docker")," installed."))),(0,i.kt)("td",null,(0,i.kt)("ul",null,(0,i.kt)("li",null,(0,i.kt)("strong",null,"CPU"),": Intel Core i7\u20134770 or AMD FX-8310 or better"),(0,i.kt)("li",null,(0,i.kt)("strong",null,"Memory"),": 16GB RAM"),(0,i.kt)("li",null,(0,i.kt)("strong",null,"Storage"),": SSD with 100GB+ available"))))),(0,i.kt)("h3",{id:"dependencies"},"Dependencies"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.bazel.build/versions/main/install-bazelisk.html"},"Bazelisk")," this will automatically manage the version of ",(0,i.kt)("strong",{parentName:"li"},(0,i.kt)("em",{parentName:"strong"},"Bazel"))," required."),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"cmake")," package installed"),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("inlineCode",{parentName:"li"},"git")," package installed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"libssl-dev")," installed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"libgmp-dev")," installed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"libtinfo5")," installed"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"libprotoc")," version 3.14 installed")),(0,i.kt)("h2",{id:"install-bazel-using-bazelisk"},"Install Bazel using Bazelisk"),(0,i.kt)("p",null,"Bazelisk is a launcher for Bazel which automatically downloads and installs an appropriate version of Bazel. Use Bazelisk to automtically manage the version of Bazel required."),(0,i.kt)("p",null,"You can install Bazelisk in multiple ways, including:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"npm install -g @bazel/bazelisk"),(0,i.kt)("li",{parentName:"ul"},"Using a binary release for Linux, macOS, or Windows ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/bazelbuild/bazelisk/releases"},"(Download binaries)")),(0,i.kt)("li",{parentName:"ul"},"Using Homebrew on macOS"),(0,i.kt)("li",{parentName:"ul"},"By compiling from source using Go: go get github.com/bazelbuild/bazelisk")),(0,i.kt)("h2",{id:"install-agora-cl-using-bazel"},"Install Agora-cl using Bazel"),(0,i.kt)("p",null,"Clone Agora-cl's ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl"},"main repository"),". Make sure you switch to the latest version (the latest version number can be found from the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),"). Once cloned, enter the directory:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"git clone https://github.com/zeroone-boa/agora-cl\ngit checkout <version>\ncd agora-cl\n")),(0,i.kt)("p",null,"Build both the Agora chain node and the validator client:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel build //cmd/beacon-chain:beacon-chain --config=release\nbazel build //cmd/validator:validator --config=release\n")),(0,i.kt)("p",null,"Bazel will automatically pull and install any dependencies as well, including Go and necessary compilers."),(0,i.kt)("h2",{id:"run-an-execution-node"},"Run an execution node"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Knowledge Check")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"Not familiar with nodes, networks, and related terminology?")," Consider reading ",(0,i.kt)("a",{parentName:"p",href:"/docs/concepts/nodes-networks"},"Nodes and networks")," before proceeding."))),(0,i.kt)("p",null,"To run a Agora node, you'll need access to an execution node. See ",(0,i.kt)("a",{parentName:"p",href:"/docs/execution-node/configuring-for-agora-cl"},"Configure execution node")," for detailed instructions if you don't already have an execution node configured."),(0,i.kt)("h2",{id:"run-a-agora-node"},"Run a Agora node"),(0,i.kt)("p",null,"Note: <YOUR_ETH_EXECUTION_NODE_ENDPOINT> is in the format of an http endpoint such as ",(0,i.kt)("inlineCode",{parentName:"p"},"http://host:port")," (ex: ",(0,i.kt)("inlineCode",{parentName:"p"},"http://localhost:8545")," for geth) or an IPC path such as ",(0,i.kt)("inlineCode",{parentName:"p"},"/path/to/geth.ipc"),"."),(0,i.kt)(c.ZP,{mdxType:"MultidimensionalContentControlsPartial"}),(0,i.kt)("div",{class:"hide-tabs"},(0,i.kt)(o.Z,{groupId:"network",defaultValue:"mainnet",values:[{label:"Mainnet",value:"mainnet"},{label:"Testnet",value:"testnet"}],mdxType:"Tabs"},(0,i.kt)(r.Z,{value:"mainnet",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel run //beacon-chain --config=release -- --execution-endpoint=<YOUR_ETH_EXECUTION_NODE_ENDPOINT>\n"))),(0,i.kt)(r.Z,{value:"testnet",mdxType:"TabItem"},(0,i.kt)("p",null,"Download the Testnet genesis state from ",(0,i.kt)("a",{parentName:"p",href:"https://agora-testnet.s3.ap-southeast-1.amazonaws.com/testnet-genesis.ssz"},"Github")," to a local file. Then issue the following command:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel run //beacon-chain --config=release -- --execution-endpoint=<YOUR_ETH_EXECUTION_NODE_ENDPOINT> --testnet --genesis-state=/path/to/genesis.ssz\n"))),(0,i.kt)(r.Z,{value:"sepolia",mdxType:"TabItem"},(0,i.kt)("p",null,"Download the Sepolia genesis state from ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/eth-clients/merge-testnets/blob/main/sepolia/genesis.ssz"},"Github")," to a local file, then run"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel run //beacon-chain --config=release -- --execution-endpoint=<YOUR_ETH_EXECUTION_NODE_ENDPOINT> --sepolia --genesis-state=/path/to/genesis.ssz\n"))),(0,i.kt)(r.Z,{value:"ropsten",mdxType:"TabItem"},(0,i.kt)("p",null,"Download the Ropsten genesis state from ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/eth-clients/merge-testnets/blob/main/ropsten-beacon-chain/genesis.ssz"},"Github")," to a local file, then run"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel run //beacon-chain --config=release -- --execution-endpoint=<YOUR_ETH_EXECUTION_NODE_ENDPOINT> --ropsten --genesis-state=/path/to/genesis.ssz\n"))))),(0,i.kt)("h2",{id:"run-a-validator"},"Run a validator"),(0,i.kt)("p",null,"Ensure that your Agora node is fully synced before proceeding. See ",(0,i.kt)("a",{parentName:"p",href:"/docs/monitoring/checking-status"},"Check node and validator status")," for detailed status-checking instructions."),(0,i.kt)("p",null,"Navigate to the ",(0,i.kt)("a",{parentName:"p",href:"https://agora-staking.bosagora.org/summary"},"Mainnet Launchpad")," and follow the instructions. If you want to participate in the ",(0,i.kt)("strong",{parentName:"p"},"testnet"),", you can navigate to the ",(0,i.kt)("a",{parentName:"p",href:"https://goerli.launchpad.ethereum.org/summary/"},"Testnet")," or ",(0,i.kt)("a",{parentName:"p",href:"https://ropsten.launchpad.ethereum.org/summary"},"Ropsten")," launchpads."),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Exercise extreme caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The correct address for the launchpad is ",(0,i.kt)("a",{parentName:"p",href:"https://agora-staking.bosagora.org"},"https://agora-staking.bosagora.org")," and the only, official validator deposit contract is ",(0,i.kt)("a",{parentName:"p",href:"https://etherscan.io/address/0x00000000219ab540356cbb839cbe05303d7705fa"},"0x00000000219ab540356cbb839cbe05303d7705fa"),". Don't send BOA directly to the contract - use the Ethereum.org launchpad instead."))),(0,i.kt)("p",null,"Throughout the process, you'll be asked to generate new validator credentials using the official Ethereum deposit command-line-tool ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-deposit-cli"},"here"),". Make sure you use the ",(0,i.kt)("inlineCode",{parentName:"p"},"mainnet")," option when generating keys with the deposit CLI. During the process, you will have generated a ",(0,i.kt)("inlineCode",{parentName:"p"},"validator_keys")," folder under the ",(0,i.kt)("inlineCode",{parentName:"p"},"agora-deposit-cli")," directory. Copy the path to the ",(0,i.kt)("inlineCode",{parentName:"p"},"validator_keys")," folder under the ",(0,i.kt)("inlineCode",{parentName:"p"},"agora-deposit-cli")," directory you created during the launchpad process. For example, if your agora-deposit-cli installation is in your ",(0,i.kt)("inlineCode",{parentName:"p"},"$HOME")," (or ",(0,i.kt)("inlineCode",{parentName:"p"},"%LOCALAPPDATA%")," on Windows) directory, you can then run the following command to import your keys:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel run //validator:validator -- accounts import --keys-dir=$HOME/agora-deposit-cli/validator_keys --accept-terms-of-use\n")),(0,i.kt)("p",null,"Next, open a second terminal window and issue the followimg command to start your validator."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel run //validator --config=release\n")),(0,i.kt)("h2",{id:"wait-for-your-validator-assignment"},"Wait for your validator assignment"),(0,i.kt)("p",null,"Please note it will take time for nodes in the network to process a deposit. To understand the timeline of becoming a validator and how long it takes on average, see ",(0,i.kt)("a",{parentName:"p",href:"https://kb.beaconcha.in/ethereum-2.0-depositing"},"this knowledge base"),". In the meantime, leave both terminal windows open and running; once the validator is activated by the ETH2 network, it will immediately begin receiving tasks and performing its responsibilities. If the eth2 chain has not yet started, the validator will be ready to start proposing blocks and signing votes as soon as the genesis time is reached."),(0,i.kt)("p",null,"To check on the status of your validator, we recommend checking out the popular block explorers: ",(0,i.kt)("a",{parentName:"p",href:"https://beaconcha.in"},"beaconcha.in")," by Bitfly and ",(0,i.kt)("a",{parentName:"p",href:"https://beacon.etherscan.io"},"beacon.etherscan.io")," by the Etherscan team."),(0,i.kt)("p",null,(0,i.kt)("img",{parentName:"p",src:"https://i.imgur.com/CDNc6Ft.png",alt:"image"}))),(0,i.kt)("h2",{id:"advanced-build-docker-images-from-source"},"Advanced: Build Docker images from source"),(0,i.kt)("p",null,"We use Bazel to build the Docker images for Agora-cl as well. This section outlines comprehensive instructions on how to build them by yourself, run them in Docker, and push to an image registry if desired. In particular, we use ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/bazelbuild/rules_docker"},(0,i.kt)("inlineCode",{parentName:"a"},"bazel rules docker"))," which provides us the ability to specify a base, barebones image, and essentially builds our binary and creates a Docker container as a simple wrapper over our binaries."),(0,i.kt)("p",null,"We do not write our own Dockerfiles, as Bazel provides us a more sandboxed, simple experience with all of its benefits. To see an example use of ",(0,i.kt)("inlineCode",{parentName:"p"},"bazel rules docker")," for how we build a particular package, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/blob/aa389c82a157008741450ba1e04d898924734432/tools/bootnode/BUILD.bazel#L36"},"here"),"."),(0,i.kt)("h3",{id:"dependencies-needed"},"Dependencies needed"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"All specified dependencies for building with Bazel ",(0,i.kt)("a",{parentName:"li",href:"/docs/install/install-with-bazel#dependencies"},"here")),(0,i.kt)("li",{parentName:"ul"},"Python installed and available in your computer")),(0,i.kt)("h3",{id:"build-process"},"Build process"),(0,i.kt)("h4",{id:"regular-docker-images"},"Regular Docker images"),(0,i.kt)("p",null,"At the moment, Agora-cl docker images can only be built on ",(0,i.kt)("strong",{parentName:"p"},"Linux")," operating systems. The standard images are very thin wrappers around the Agora-cl beacon-chain and validator binaries, and do not contain any other typical components of Docker images such as a bash shell. These are the Docker images we ship to all users, and you can build them yourself as follows:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"bazel build //beacon-chain:image_bundle --config=release\nbazel build //validator:image_bundle --config=release\n")),(0,i.kt)("p",null,"The tags for the images are specified ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/blob/ff329df808ad68fbe79d11c73121fa6a7a0c0f29/cmd/beacon-chain/BUILD.bazel#L58"},"here")," for the beacon-chain and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/blob/ff329df808ad68fbe79d11c73121fa6a7a0c0f29/cmd/validator/BUILD.bazel#L59"},"here")," for the validator. The default image tags for these images are:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bosagora/agora-cl-node:latest\nbosagora/agora-cl-validator:latest\n")),(0,i.kt)("p",null,"You can edit these in the links above to your liking."),(0,i.kt)("h4",{id:"alpine-images"},"Alpine images"),(0,i.kt)("p",null,"Agora-cl also provides Alpine images built using:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"bazel build //beacon-chain:image_bundle_alpine --config=release\nbazel build //validator:image_bundle_alpine --config=release\n")),(0,i.kt)("h4",{id:"debug-images"},"Debug images"),(0,i.kt)("p",null,"Agora-cl also provides debug images built using:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"bazel build //beacon-chain:image_bundle_debug --config=release\nbazel build //validator:image_bundle_debug --config=release\n")),(0,i.kt)("h3",{id:"running-images"},"Running images"),(0,i.kt)("p",null,"You can load the images into your local Docker daemon by first building a ",(0,i.kt)("inlineCode",{parentName:"p"},".tar")," file as follows for your desired image bundle:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel build cmd/beacon-chain:image_bundle.tar\nbazel build cmd/validator:image_bundle.tar\n")),(0,i.kt)("p",null,"Then, you can load it into Docker with:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"docker load -i bazel-bin/my/image/helloworld.tar\n")),(0,i.kt)("p",null,"For example, you may see output such as this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre"},"docker load -i bazel-bin/cmd/beacon-chain/image_bundle.tar\nfd6fa224ea91: Loading layer [==================================================>]  3.031MB/3.031MB\n87c9f1582ca0: Loading layer [==================================================>]  15.44MB/15.44MB\n231bdbae9aea: Loading layer [==================================================>]  1.966MB/1.966MB\na6dc470c72b7: Loading layer [==================================================>]  10.24kB/10.24kB\na0de9c673ef6: Loading layer [==================================================>]  56.37MB/56.37MB\n84ff92691f90: Loading layer [==================================================>]  10.24kB/10.24kB\nLoaded image: bosagora/agora-cl-node:latest\nLoaded image: zeroone-boa/agora-cl-beacon-chain:latest\n")),(0,i.kt)("h3",{id:"pushing-to-a-container-registry"},"Pushing to a container registry"),(0,i.kt)("h4",{id:"authentication"},"Authentication"),(0,i.kt)("p",null,"You can use these rules to access private images using standard Docker\nauthentication methods.  e.g. to utilize the ",(0,i.kt)("a",{parentName:"p",href:"https://gcr.io"},"Google Container Registry"),". See\n",(0,i.kt)("a",{parentName:"p",href:"https://cloud.google.com/container-registry/docs/advanced-authentication"},"here")," for authentication methods."),(0,i.kt)("p",null,"See:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/awslabs/amazon-ecr-credential-helper"},"Amazon ECR Docker Credential Helper")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/Azure/acr-docker-credential-helper"},"Azure Docker Credential Helper"))),(0,i.kt)("h4",{id:"push"},"Push"),(0,i.kt)("p",null,"To push the actual images, you do not need to build the image bundle beforehand. You can do a simple:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"bazel run //beacon-chain:push_images --config=release\nbazel run //validator:push_images --config=release\n")),(0,i.kt)("p",null,"Which will deploy all images with the tags specified in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/blob/ff329df808ad68fbe79d11c73121fa6a7a0c0f29/cmd/beacon-chain/BUILD.bazel#L58"},"here")," for the beacon-chain and ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/blob/ff329df808ad68fbe79d11c73121fa6a7a0c0f29/cmd/validator/BUILD.bazel#L59"},"here")," for the validator."),(0,i.kt)("p",null,"By default, this will deploy to Bosagora dockerhub organisation: ",(0,i.kt)("inlineCode",{parentName:"p"},"bosagora"),", which you will not have authentication access to, so make sure you edit the image tags to your appropriate registry and authenticate as needed."),(0,i.kt)(d.M,{mdxType:"RequestUpdateWidget"}))}k.isMDXComponent=!0},610:(e,a,t)=>{t.d(a,{ZP:()=>m});var n=t(7462),l=t(3366),i=t(7294),o=t(3905),r=t(5064),s=t(8215),c=t(1262),d=function(){var e=function(){return document.querySelectorAll(".quickstart-tabs .tabs__item")},a=function(a){var t;return e().forEach((function(e){e.innerHTML==a&&(t=e)})),t},t=function(e){a(e).classList.add("disabled-tab")},n=function(e){console.log("selecting "+e+"..."),a(e).click()},l=function(e){return a(e).classList.contains("tabs__item--active")},o=function(){return window.location.href.indexOf("/authentication")>-1},r=function(){var e,a,t,n;e=l("Windows")?"Windows":"Linux, MacOS, Arm64",l("Mainnet")?a="Mainnet":l("Testnet")&&(a="Testnet"),l("Agora-el")&&(t="Agora-el"),n=l("IPC")?"IPC":"HTTP-JWT";var i=document.querySelector(".quickstart-tabs");i.dataset.selectedOS=e,i.dataset.selectedNetwork=a,i.dataset.selectedEL=t,i.dataset.selectedENBN=n},s=function(){setTimeout((function(){o()&&(setTimeout((function(){n("HTTP-JWT"),r()}),50),t("IPC")),e().forEach((function(e){e.textContent.indexOf(":")>-1?e.outerHTML=e.outerHTML:e.addEventListener("click",(function(e){var l=e.target,i=l.textContent;"Agora-el"==i?a("IPC").classList.remove("disabled-tab"):"IPC"==i&&(o()?(setTimeout((function(){n("HTTP-JWT")}),50),t("IPC")):n("Agora-el")),function(e){var a=e.parentElement;a.classList.remove("updated"),a.classList.add("updated"),setTimeout((function(){a.classList.remove("updated")}),2e3)}(l),r()}),!1)})),r()}),100)};return i.createElement(c.Z,null,(function(){s()}))},u=["components"],p={toc:[]};function m(e){var a=e.components,t=(0,l.Z)(e,u);return(0,o.kt)("wrapper",(0,n.Z)({},p,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)(d,{mdxType:"MultiDimensionalContentWidget"}),(0,o.kt)("div",{class:"quickstart-tabs"},(0,o.kt)(r.Z,{className:"tabgroup-with-label os-tabgroup",groupId:"os",defaultValue:"others",values:[{label:"Operating system:",value:"label"},{label:"Linux, MacOS, Arm64",value:"others"},{label:"Windows",value:"win"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{className:"unclickable-element",value:"label",mdxType:"TabItem"}),(0,o.kt)(s.Z,{value:"others",mdxType:"TabItem"}),(0,o.kt)(s.Z,{value:"win",mdxType:"TabItem"})),(0,o.kt)(r.Z,{className:"tabgroup-with-label network-tabgroup",groupId:"network",defaultValue:"mainnet",values:[{label:"Network:",value:"label"},{label:"Mainnet",value:"mainnet"},{label:"Testnet",value:"testnet"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{className:"unclickable-element",value:"label",mdxType:"TabItem"}),(0,o.kt)(s.Z,{value:"mainnet",mdxType:"TabItem"}),(0,o.kt)(s.Z,{value:"testnet",mdxType:"TabItem"})),(0,o.kt)(r.Z,{className:"tabgroup-with-label hidden-in-docker-guide el-tabgroup",groupId:"execution-clients",defaultValue:"geth",values:[{label:"Execution client:",value:"label"},{label:"Agora-el",value:"agora-el"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{className:"unclickable-element",value:"label",mdxType:"TabItem"}),(0,o.kt)(s.Z,{value:"agora-el",mdxType:"TabItem"})),(0,o.kt)(r.Z,{className:"tabgroup-with-label hidden-in-jwt-guide hidden-in-docker-guide enbn-tabgroup",groupId:"protocol",defaultValue:"jwt",values:[{label:"EN-BN connection:",value:"label"},{label:"HTTP-JWT",value:"jwt"},{label:"IPC",value:"ipc"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{className:"unclickable-element",value:"label",mdxType:"TabItem"}),(0,o.kt)(s.Z,{value:"jwt",mdxType:"TabItem"}),(0,o.kt)(s.Z,{value:"ipc",mdxType:"TabItem"}))))}m.isMDXComponent=!0}}]);