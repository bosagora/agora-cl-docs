"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5459],{3905:(t,e,a)=>{a.d(e,{Zo:()=>c,kt:()=>m});var n=a(7294);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function r(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?r(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function l(t,e){if(null==t)return{};var a,n,o=function(t,e){if(null==t)return{};var a,n,o={},r=Object.keys(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||(o[a]=t[a]);return o}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)a=r[n],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(o[a]=t[a])}return o}var s=n.createContext({}),p=function(t){var e=n.useContext(s),a=e;return t&&(a="function"==typeof t?t(e):i(i({},e),t)),a},c=function(t){var e=p(t.components);return n.createElement(s.Provider,{value:e},t.children)},d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},u=n.forwardRef((function(t,e){var a=t.components,o=t.mdxType,r=t.originalType,s=t.parentName,c=l(t,["components","mdxType","originalType","parentName"]),u=p(a),m=o,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return a?n.createElement(h,i(i({ref:e},c),{},{components:a})):n.createElement(h,i({ref:e},c))}));function m(t,e){var a=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var r=a.length,i=new Array(r);i[0]=u;var l={};for(var s in e)hasOwnProperty.call(e,s)&&(l[s]=e[s]);l.originalType=t,l.mdxType="string"==typeof t?t:o,i[1]=l;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},1262:(t,e,a)=>{a.d(e,{Z:()=>r});var n=a(7294),o=a(2263);const r=function(t){var e=t.children,a=t.fallback;return(0,o.Z)().isClient&&null!=e?n.createElement(n.Fragment,null,e()):a||null}},8215:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(7294);const o=function(t){var e=t.children,a=t.hidden,o=t.className;return n.createElement("div",{role:"tabpanel",hidden:a,className:o},e)}},5064:(t,e,a)=>{a.d(e,{Z:()=>d});var n=a(7294),o=a(9443);const r=function(){var t=(0,n.useContext)(o.Z);if(null==t)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return t};var i=a(6010);const l="tabItem_1uMI",s="tabItemActive_2DSg";var p=37,c=39;const d=function(t){var e=t.lazy,a=t.block,o=t.defaultValue,d=t.values,u=t.groupId,m=t.className,h=r(),g=h.tabGroupChoices,k=h.setTabGroupChoices,v=(0,n.useState)(o),f=v[0],y=v[1],b=n.Children.toArray(t.children),N=[];if(null!=u){var w=g[u];null!=w&&w!==f&&d.some((function(t){return t.value===w}))&&y(w)}var x=function(t){var e=t.currentTarget,a=N.indexOf(e),n=d[a].value;y(n),null!=u&&(k(u,n),setTimeout((function(){var t,a,n,o,r,i,l,p;(t=e.getBoundingClientRect(),a=t.top,n=t.left,o=t.bottom,r=t.right,i=window,l=i.innerHeight,p=i.innerWidth,a>=0&&r<=p&&o<=l&&n>=0)||(e.scrollIntoView({block:"center",behavior:"smooth"}),e.classList.add(s),setTimeout((function(){return e.classList.remove(s)}),2e3))}),150))},T=function(t){var e,a;switch(t.keyCode){case c:var n=N.indexOf(t.target)+1;a=N[n]||N[0];break;case p:var o=N.indexOf(t.target)-1;a=N[o]||N[N.length-1]}null==(e=a)||e.focus()};return n.createElement("div",{className:"tabs-container"},n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":a},m)},d.map((function(t){var e=t.value,a=t.label;return n.createElement("li",{role:"tab",tabIndex:f===e?0:-1,"aria-selected":f===e,className:(0,i.Z)("tabs__item",l,{"tabs__item--active":f===e}),key:e,ref:function(t){return N.push(t)},onKeyDown:T,onFocus:x,onClick:x},a)}))),e?(0,n.cloneElement)(b.filter((function(t){return t.props.value===f}))[0],{className:"margin-vert--md"}):n.createElement("div",{className:"margin-vert--md"},b.map((function(t,e){return(0,n.cloneElement)(t,{key:e,hidden:t.props.value!==f})}))))}},9443:(t,e,a)=>{a.d(e,{Z:()=>n});const n=(0,a(7294).createContext)(void 0)},5505:(t,e,a)=>{a.d(e,{M:()=>r});var n=a(7294),o=a(1262),r=function(t){var e=t.commaDelimitedContributors,a=t.lastVerifiedDateString,r=t.lastVerifiedVersionString,i={Chris:"hewison-chris"},l=function(t){return n.createElement("a",{class:"header-badge",href:"https://github.com/"+i[t]},n.createElement("span",{class:"badge-avatar",style:{backgroundImage:"url('https://avatars.githubusercontent.com/"+i[t]+"')"}}),n.createElement("span",{class:"badge-label"},t))};return n.createElement(o.Z,null,(function(){return n.createElement("div",{class:"header-badges"},null!=e?e.split(",").map(l):null,function(t,e){if(null!=t&&null!=e)return n.createElement("a",{class:"header-badge"},n.createElement("span",{class:"badge-avatar emoji-avatar"},"\u2714\ufe0f"),n.createElement("span",{class:"badge-label"},"Last verified on ",n.createElement("strong",null,t)," using Agora-cl ",e))}(a,r),n.createElement("a",{class:"header-badge",href:"https://github.com/Bosagora/documentation/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},n.createElement("span",{class:"badge-avatar emoji-avatar"},"\u270f\ufe0f"),n.createElement("span",{class:"badge-label"},"Request an update")))}))}},1144:(t,e,a)=>{a.d(e,{M:()=>r});var n=a(7294),o=a(1262),r=function(t){return function(t){if(null==t)throw new TypeError("Cannot destructure undefined")}(t),n.createElement(o.Z,null,(function(){return n.createElement("div",{class:"update-request"},n.createElement("a",{href:"https://https://github.com/zeroone-boa/agora-cl-docs/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},"\ud83d\udc3c Request an update"))}))}},6158:(t,e,a)=>{a.r(e),a.d(e,{contentTitle:()=>u,default:()=>k,frontMatter:()=>d,metadata:()=>m,toc:()=>h});var n=a(7462),o=a(3366),r=(a(7294),a(3905)),i=a(5505),l=a(5064),s=a(8215),p=a(1144),c=["components"],d={id:"migrating-keys",title:"Move to a new machine",sidebar_label:"Move to a new machine"},u=void 0,m={unversionedId:"advanced/migrating-keys",id:"advanced/migrating-keys",isDocsHomePage:!1,title:"Move to a new machine",description:"This document provides guidance on migrating Agora-cl and your validator keys from one host system to another while minimizing the risk of slashing.",source:"@site/docs/advanced/migrating-keys.md",sourceDirName:"advanced",slug:"/advanced/migrating-keys",permalink:"/docs/advanced/migrating-keys",editUrl:"https://github.com/zeroone-boa/agora-cl-docs/edit/master/website/docs/advanced/migrating-keys.md",version:"current",frontMatter:{id:"migrating-keys",title:"Move to a new machine",sidebar_label:"Move to a new machine"},sidebar:"docs",previous:{title:"Import & export slashing protection history",permalink:"/docs/wallet/slashing-protection"},next:{title:"Switch to a new client",permalink:"/docs/advanced/switch-clients"}},h=[{value:"Migration Process",id:"migration-process",children:[{value:"Step 1: Export slashing protection history",id:"step-1-export-slashing-protection-history",children:[]},{value:"Step 2:  Verify and Backup Validator accounts",id:"step-2--verify-and-backup-validator-accounts",children:[]},{value:"Step 3:  Importing Validator accounts",id:"step-3--importing-validator-accounts",children:[]},{value:"Step 4: Importing slashing protection history",id:"step-4-importing-slashing-protection-history",children:[]},{value:"Step 5:  Verification and restarting the validator client",id:"step-5--verification-and-restarting-the-validator-client",children:[]}]},{value:"Frequently asked questions",id:"frequently-asked-questions",children:[]}],g={toc:h};function k(t){var e=t.components,a=(0,o.Z)(t,c);return(0,r.kt)("wrapper",(0,n.Z)({},g,a,{components:e,mdxType:"MDXLayout"}),(0,r.kt)(i.M,{mdxType:"HeaderBadgesWidget"}),(0,r.kt)("p",null,"This document provides guidance on migrating Agora-cl and your validator keys from one host system to another while minimizing the risk of slashing."),(0,r.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Slashing Prevention")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"The following best practices will help minimize the risk of ",(0,r.kt)("a",{parentName:"p",href:"/docs/concepts/slashing"},"slashing")," while migrating between machines:"),(0,r.kt)("ol",{parentName:"div"},(0,r.kt)("li",{parentName:"ol"},"Never run more than a single validator process with the same keys loaded."),(0,r.kt)("li",{parentName:"ol"},"Delete your keys from the old machine before starting your new machine."),(0,r.kt)("li",{parentName:"ol"},"Maintain and utilize slashing protection."),(0,r.kt)("li",{parentName:"ol"},'Accept some downtime as part of a successful migration. We recommend waiting at least 1 epoch (roughly 10 minutes) between "old machine off" and "new machine on".')))),(0,r.kt)("h2",{id:"migration-process"},"Migration Process"),(0,r.kt)("p",null,"The migration process is straightforward and not too dissimilar to backing up and restoring important data."),(0,r.kt)("h3",{id:"step-1-export-slashing-protection-history"},"Step 1: Export slashing protection history"),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Stop the Validator")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Exporting the slashing protection database is a real-time process and can be undertaken at any time. During migration, you should run the export once you have stopped the validator you are migrating away from. This ensures all validator actions are captured and subsequently imported into the new validator process."))),(0,r.kt)("p",null,"To export your slashing protection history, use Agora-cl's built in commands which will work with any installation method."),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"In the below commands ",(0,r.kt)("inlineCode",{parentName:"p"},"datadir")," should point to the directory containing your ",(0,r.kt)("inlineCode",{parentName:"p"},"validator.db")," file. For example: ",(0,r.kt)("inlineCode",{parentName:"p"},"/direct/validator.db"),"."))),(0,r.kt)(l.Z,{groupId:"operating-systems",defaultValue:"lin",values:[{label:"Linux",value:"lin"},{label:"Windows",value:"win"},{label:"MacOS",value:"mac"},{label:"Arm64",value:"arm"}],mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"lin",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator slashing-protection-history export --datadir=/path/to/validatorDb --slashing-protection-export-dir=/path/to/desired/outputdir\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Docker")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -it -v /path/to/outputdir:/output -v /path/to/wallet:/wallet bosagora/agora-cl-validator:stable -- slashing-protection-history export --datadir=/path/to/validatorDb --slashing-protection-export-dir=/output\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Bazel")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"bazel run //validator -- slashing-protection-history export --datadir=/path/to/validatorDb --slashing-protection-export-dir=/path/to/desired/outputdir\n")),(0,r.kt)("p",null,"The first time you run the process you will be asked to accept or decline the terms and conditions. Once accepted, the process exports the slashing protection JSON file in your specified ",(0,r.kt)("inlineCode",{parentName:"p"},"/path/to/outputdir")," folder.")),(0,r.kt)(s.Z,{value:"win",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"agora-cl.bat validator slashing-protection-history export --datadir=\\path\\to\\validatorDb --slashing-protection-export-dir=\\path\\to\\desired\\outputdir\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Docker")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -it -v \\path\\to\\outputdir:/output -v \\path\\to\\wallet:/wallet bosagora/agora-cl-validator:stable --slashing-protection-history export --datadir=/path/to/validatorDb --slashing-protection-export-dir=/output\n")),(0,r.kt)("p",null,"Note that ",(0,r.kt)("inlineCode",{parentName:"p"},"datadir")," should point to the directory containing your ",(0,r.kt)("inlineCode",{parentName:"p"},"validator.db")," file. For example: ",(0,r.kt)("inlineCode",{parentName:"p"},"/direct/validator.db"),"."),(0,r.kt)("p",null,"The first time you run the process you will be asked to accept or decline the terms and conditions. Once accepted, the process exports the slashing protection JSON file in your specified /path/to/outputdir folder.")),(0,r.kt)(s.Z,{value:"mac",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator slashing-protection-history export --datadir=/path/to/validatorDb --slashing-protection-export-dir=/path/to/desired/outputdir\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Docker")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -it -v /path/to/outputdir:/output -v /path/to/wallet:/wallet bosagora/agora-cl-validator:stable -- slashing-protection-history export --datadir=/path/to/validatorDb --slashing-protection-export-dir=/output\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Bazel")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"bazel run //validator -- slashing-protection-history export --datadir=/path/to/validatorDb --slashing-protection-export-dir=/path/to/desired/outputdir\n")),(0,r.kt)("p",null,"The first time you run the process you will be asked to accept or decline the terms and conditions. Once accepted, the process exports the slashing protection JSON file in your specified /path/to/outputdir folder.")),(0,r.kt)(s.Z,{value:"arm",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator slashing-protection-history export --datadir=\\path\\to\\validatorDb --slashing-protection-export-dir=\\path\\to\\desired\\outputdir\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Bazel")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"bazel run //validator -- slashing-protection-history export --datadir=/path/to/validatorDb --slashing-protection-export-dir=/path/to/desired/outputdir\n")),(0,r.kt)("p",null,"The first time you run the process you will be asked to accept or decline the terms and conditions. Once accepted, the process exports the slashing protection JSON file in your specified /path/to/outputdir folder."))),(0,r.kt)("h3",{id:"step-2--verify-and-backup-validator-accounts"},"Step 2:  Verify and Backup Validator accounts"),(0,r.kt)("p",null,"An important aspect of managing Validator accounts is ensuring you know which account(s) you are working with. This enables you to verify the account(s) loaded in the validator prior to starting or taking any other action using the validator process, and can help reduce the risk of running the same account on more than one validator instance."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Wallet Password needed")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You will need the password to the validator wallet in order to undertake Delete, List, Backup or Import actions."))),(0,r.kt)("h4",{id:"identify-accounts"},"Identify Accounts"),(0,r.kt)("p",null,"To Identify the account(s) loaded in your validator, issue the following command:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Linux/MacOS based systems")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator accounts list\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Windows based systems")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"agora-cl.bat validator accounts list\n")),(0,r.kt)("p",null,"This will produce output in the format of account number, three words seperated by a hyphon (-) and the public keys of each account. The output will be similar to this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"Account 0 | three-random-words\n[validating public key] 0xabcd1234...........\nAccount 1 | words-three-random\n[validating public key] 0xdcba4321...........\n")),(0,r.kt)("p",null,"We recommend that you keep an accurate and up-to-date record of the name (three word and public key combinations) of your account(s) for management and verification purposes."),(0,r.kt)("h4",{id:"backup"},"Backup"),(0,r.kt)("p",null,"You can backup validator accounts from your wallet using the following command:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Linux/MacOS based systems")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator accounts backup\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Windows based systems")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"agora-cl.bat validator accounts backup\n")),(0,r.kt)("p",null,"You will now be prompted for the wallet password. Once entered, you will be guided through the backup process where you will able to select individual or all accounts to backup and the location where the backup file is created. You will also be prompted for a ",(0,r.kt)("strong",{parentName:"p"},'"password"')," for the backup file, ",(0,r.kt)("strong",{parentName:"p"},"it is important to keep a note of this for use during the import process"),"."),(0,r.kt)("p",null,"You can also run the accounts backup command non-interactively by using the following command line flags, which are also viewable by appending --help to the command line listed above:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Flag Usage")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Flag"),(0,r.kt)("th",{parentName:"tr",align:"left"},"Usage"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--wallet-dir")),(0,r.kt)("td",{parentName:"tr",align:"left"},'Path to a wallet directory (default: "$HOME/AgoraValidators/agora-cl-wallet-v2")')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--wallet-password-file")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Path to a plain-text, .txt file containing your wallet's password.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--backup-dir")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Path to a directory where accounts will be backed up into a zip file. (default: $HOME/AgoraValidators/)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--backup-public-keys")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Comma-separated list of public key hex strings to specify which validator accounts to backup.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"--backup-password-file")),(0,r.kt)("td",{parentName:"tr",align:"left"},"Path to a plain-text, .txt file containing the desired password for your backed up accounts.")))),(0,r.kt)("h3",{id:"step-3--importing-validator-accounts"},"Step 3:  Importing Validator accounts"),(0,r.kt)("p",null,"Expand (unzip) the backup file created above. The file will contain one JSON file for each account in the validator. Once the JSON files have been created, import them using the following command:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Linux/MacOS based systems")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator accounts import --keys-dir=/path/to/keystore-file.json\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Windows based systems")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"agora-cl.bat validator accounts import --keys-dir=\\path\\to\\keystore-file.json\n")),(0,r.kt)("p",null,"This will import all files that are valid EIP-2335 keystores, such as those generated by the backup process above or the official Ethereum deposit launchpad's command-line tool."),(0,r.kt)("p",null,'The files you are importing must have the prefix "keystore-" using the defaults in backup will typically create a zip file containing the sequential keystores for the validators. If you have 1 validator account the zip file will typically contain the file keystore-0.json. If you have 3 validator accounts the keystore will typically contain keystore-0.json, keystore-1.json and keystore-2.json.'),(0,r.kt)("h3",{id:"step-4-importing-slashing-protection-history"},"Step 4: Importing slashing protection history"),(0,r.kt)("p",null,"To import a slashing protection JSON file (all Ethereum consensus clients use the same format defined in EIP-3076) use the appropriate installation method for your Agora-cl validator."),(0,r.kt)(l.Z,{groupId:"operating-systems",defaultValue:"lin",values:[{label:"Linux",value:"lin"},{label:"Windows",value:"win"},{label:"MacOS",value:"mac"},{label:"Arm64",value:"arm"}],mdxType:"Tabs"},(0,r.kt)(s.Z,{value:"lin",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator slashing-protection-history import --datadir=/path/to/validatorDb --slashing-protection-json-file=/path/to/desiredimportfile\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Docker")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -it -v /path/to/desiredimportfile.json:/import/desiredimportfile.json -v /path/to/wallet:/wallet bosagora/agora-cl-validator:stable -- slashing-protection-history import --datadir=/path/to/validatorDb --slashing-protection-json-file=/import/desiredimportfile.json\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Bazel")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"bazel run //validator -- slashing-protection-history import --datadir=/path/to/validatorDb --slashing-protection-json-file=/path/to/desiredimportfile\n"))),(0,r.kt)(s.Z,{value:"win",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"agora-cl.bat validator slashing-protection-history import --datadir=\\path\\to\\validatorDb --slashing-protection-json-file=\\path\\to\\desiredimportfile\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Docker")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -it -v \\path\\to\\desiredimportfile.json:/import/desiredimportfile.json -v \\path\\to\\wallet:/wallet bosagora/agora-cl-validator:stable -- slashing-protection-history import --datadir=/path/to/validatorDb --slashing-protection-json-file=/import/desiredimportfile.json\n"))),(0,r.kt)(s.Z,{value:"mac",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator slashing-protection-history import --datadir=/path/to/validatorDb --slashing-protection-json-file=/path/to/desiredimportfile\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Docker")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"docker run -it -v /path/to/desiredimportfile.json:/import/desiredimportfile.json -v /path/to/wallet:/wallet bosagora/agora-cl-validator:stable -- slashing-protection-history import --datadir=/wallet --slashing-protection-json-file=/import/desiredimportfile.json\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Bazel")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"bazel run //validator -- slashing-protection-history import --datadir=/path/to/validatorDb --slashing-protection-json-file=/path/to/desiredimportfile\n"))),(0,r.kt)(s.Z,{value:"arm",mdxType:"TabItem"},(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator slashing-protection-history import --datadir=/path/to/validatorDb --slashing-protection-json-file=/path/to/desiredimportfile\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Bazel")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"bazel run //validator -- slashing-protection-history import --datadir=/path/to/validatorDb --slashing-protection-json-file=/path/to/desiredimportfile\n")))),(0,r.kt)("h3",{id:"step-5--verification-and-restarting-the-validator-client"},"Step 5:  Verification and restarting the validator client"),(0,r.kt)("p",null,"It is highly recommended that the validator process on the original, migrated validator is stopped and disabled to ensure it is not restarted automatically or accidently."),(0,r.kt)("p",null,"On the original system, with the validator process stopped, remove the account(s) using the process below:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Linux/MacOS based systems")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"./agora-cl.sh validator accounts delete\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Using Windows based systems")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"agora-cl.bat validator accounts delete\n")),(0,r.kt)("p",null,"This will produce output in the same format as the list function, three words identifying the account seperated by a hyphon (-) and the public keys of each account, the output will be similar to this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"Use the arrow keys to navigate\nSelect the account(s) you would like to delete\n    Done Selecting\n    All Accounts\n    0 | three-random-words | 0xabcd1234...........\n    1 | words-three-random | 0xdcba4321...........\n")),(0,r.kt)("p",null,"Using the arrow keys (up-down-left-right) navigate to the Validator(s) that has been migrated and that you want to delete and select it."),(0,r.kt)("p",null,"Once complete, verify the account removal using the validator accounts list command outlined above in ",(0,r.kt)("a",{parentName:"p",href:"#identify-accounts"},"Identify Accounts"),"."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"When removal of the account has been confirmed, the new, migrated validator process can be started.")),(0,r.kt)("h2",{id:"frequently-asked-questions"},"Frequently asked questions"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"When I migrate my slashing protection history from Machine A -> Machine B, or Client A -> Client B, do I need to retain A's slashing protection history after importing to B?")),(0,r.kt)("p",null,"No. After successfully importing your slashing protection history from A -> B, you can discard A. If you need to migrate from B -> C, B's slashing protection history is all you need to export/import."),(0,r.kt)(p.M,{mdxType:"RequestUpdateWidget"}))}k.isMDXComponent=!0},6010:(t,e,a)=>{function n(t){var e,a,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(a=n(t[e]))&&(o&&(o+=" "),o+=a);else for(e in t)t[e]&&(o&&(o+=" "),o+=e);return o}function o(){for(var t,e,a=0,o="";a<arguments.length;)(t=arguments[a++])&&(e=n(t))&&(o&&(o+=" "),o+=e);return o}a.d(e,{Z:()=>o})}}]);