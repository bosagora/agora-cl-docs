"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6812],{4334:(e,a,t)=>{function o(e){var a,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(a=0;a<e.length;a++)e[a]&&(t=o(e[a]))&&(r&&(r+=" "),r+=t);else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}t.d(a,{Z:()=>r});const r=function(){for(var e,a,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(a=o(e))&&(r&&(r+=" "),r+=a);return r}},3905:(e,a,t)=>{t.d(a,{Zo:()=>u,kt:()=>m});var o=t(7294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function n(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);a&&(o=o.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?n(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function i(e,a){if(null==e)return{};var t,o,r=function(e,a){if(null==e)return{};var t,o,r={},n=Object.keys(e);for(o=0;o<n.length;o++)t=n[o],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)t=n[o],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),d=function(e){var a=o.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},u=function(e){var a=d(e.components);return o.createElement(s.Provider,{value:a},e.children)},p={inlineCode:"code",wrapper:function(e){var a=e.children;return o.createElement(o.Fragment,{},a)}},c=o.forwardRef((function(e,a){var t=e.components,r=e.mdxType,n=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=d(t),m=r,h=c["".concat(s,".").concat(m)]||c[m]||p[m]||n;return t?o.createElement(h,l(l({ref:a},u),{},{components:t})):o.createElement(h,l({ref:a},u))}));function m(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var n=t.length,l=new Array(n);l[0]=c;var i={};for(var s in a)hasOwnProperty.call(a,s)&&(i[s]=a[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var d=2;d<n;d++)l[d]=t[d];return o.createElement.apply(null,l)}return o.createElement.apply(null,t)}c.displayName="MDXCreateElement"},1262:(e,a,t)=>{t.d(a,{Z:()=>n});var o=t(7294),r=t(2263);const n=function(e){var a=e.children,t=e.fallback;return(0,r.Z)().isClient&&null!=a?o.createElement(o.Fragment,null,a()):t||null}},8215:(e,a,t)=>{t.d(a,{Z:()=>r});var o=t(7294);const r=function(e){var a=e.children,t=e.hidden,r=e.className;return o.createElement("div",{role:"tabpanel",hidden:t,className:r},a)}},5064:(e,a,t)=>{t.d(a,{Z:()=>p});var o=t(7294),r=t(9443);const n=function(){var e=(0,o.useContext)(r.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e};var l=t(4334);const i="tabItem_vU9c",s="tabItemActive_cw6a";var d=37,u=39;const p=function(e){var a=e.lazy,t=e.block,r=e.defaultValue,p=e.values,c=e.groupId,m=e.className,h=n(),g=h.tabGroupChoices,k=h.setTabGroupChoices,v=(0,o.useState)(r),y=v[0],w=v[1],f=o.Children.toArray(e.children),b=[];if(null!=c){var N=g[c];null!=N&&N!==y&&p.some((function(e){return e.value===N}))&&w(N)}var C=function(e){var a=e.currentTarget,t=b.indexOf(a),o=p[t].value;w(o),null!=c&&(k(c,o),setTimeout((function(){var e,t,o,r,n,l,i,d;(e=a.getBoundingClientRect(),t=e.top,o=e.left,r=e.bottom,n=e.right,l=window,i=l.innerHeight,d=l.innerWidth,t>=0&&n<=d&&r<=i&&o>=0)||(a.scrollIntoView({block:"center",behavior:"smooth"}),a.classList.add(s),setTimeout((function(){return a.classList.remove(s)}),2e3))}),150))},T=function(e){var a,t;switch(e.keyCode){case u:var o=b.indexOf(e.target)+1;t=b[o]||b[0];break;case d:var r=b.indexOf(e.target)-1;t=b[r]||b[b.length-1]}null==(a=t)||a.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":t},m)},p.map((function(e){var a=e.value,t=e.label;return o.createElement("li",{role:"tab",tabIndex:y===a?0:-1,"aria-selected":y===a,className:(0,l.Z)("tabs__item",i,{"tabs__item--active":y===a}),key:a,ref:function(e){return b.push(e)},onKeyDown:T,onFocus:C,onClick:C},t)}))),a?(0,o.cloneElement)(f.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},f.map((function(e,a){return(0,o.cloneElement)(e,{key:a,hidden:e.props.value!==y})}))))}},9443:(e,a,t)=>{t.d(a,{Z:()=>o});const o=(0,t(7294).createContext)(void 0)},5505:(e,a,t)=>{t.d(a,{M:()=>n});var o=t(7294),r=t(1262),n=function(e){var a=e.commaDelimitedContributors,t=e.lastVerifiedDateString,n=e.lastVerifiedVersionString,l={Chris:"hewison-chris"},i=function(e){return o.createElement("a",{class:"header-badge",href:"https://github.com/"+l[e]},o.createElement("span",{class:"badge-avatar",style:{backgroundImage:"url('https://avatars.githubusercontent.com/"+l[e]+"')"}}),o.createElement("span",{class:"badge-label"},e))};return o.createElement(r.Z,null,(function(){return o.createElement("div",{class:"header-badges"},null!=a?a.split(",").map(i):null,function(e,a){if(null!=e&&null!=a)return o.createElement("a",{class:"header-badge"},o.createElement("span",{class:"badge-avatar emoji-avatar"},"\u2714\ufe0f"),o.createElement("span",{class:"badge-label"},"Last verified on ",o.createElement("strong",null,e)," using Agora-cl ",a))}(t,n),o.createElement("a",{class:"header-badge",href:"https://github.com/Bosagora/documentation/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},o.createElement("span",{class:"badge-avatar emoji-avatar"},"\u270f\ufe0f"),o.createElement("span",{class:"badge-label"},"Request an update")))}))}},1144:(e,a,t)=>{t.d(a,{M:()=>n});var o=t(7294),r=t(1262),n=function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),o.createElement(r.Z,null,(function(){return o.createElement("div",{class:"update-request"},o.createElement("a",{href:"https://https://github.com/zeroone-boa/agora-cl-docs/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},"\ud83d\udc3c Request an update"))}))}},7048:(e,a,t)=>{t.r(a),t.d(a,{contentTitle:()=>c,default:()=>k,frontMatter:()=>p,metadata:()=>m,toc:()=>h});var o=t(7462),r=t(3366),n=(t(7294),t(3905)),l=t(5505),i=t(5064),s=t(8215),d=t(1144),u=["components"],p={id:"staying-up-to-date",title:"Stay up to date",sidebar_label:"Stay up to date"},c=void 0,m={unversionedId:"agora-cl-usage/staying-up-to-date",id:"agora-cl-usage/staying-up-to-date",isDocsHomePage:!1,title:"Stay up to date",description:"This section outlines the step-by-step process for how to keep Agora-cl up to date, how to downgrade versions, and some security recommendations for stakers regarding updates.",source:"@site/docs/agora-cl-usage/staying-up-to-date.md",sourceDirName:"agora-cl-usage",slug:"/agora-cl-usage/staying-up-to-date",permalink:"/docs/agora-cl-usage/staying-up-to-date",editUrl:"https://github.com/zeroone-boa/agora-cl-docs/edit/master/website/docs/agora-cl-usage/staying-up-to-date.md",version:"current",frontMatter:{id:"staying-up-to-date",title:"Stay up to date",sidebar_label:"Stay up to date"},sidebar:"docs",previous:{title:"Configure execution node",permalink:"/docs/execution-node/configuring-for-agora-cl"},next:{title:"Sync from a checkpoint",permalink:"/docs/agora-cl-usage/checkpoint-sync"}},h=[{value:"Installing Agora-cl",id:"installing-agora-cl",children:[]},{value:"Recommended versions",id:"recommended-versions",children:[]},{value:"How to subscribe for updates",id:"how-to-subscribe-for-updates",children:[]},{value:"How to securely upgrade Agora-cl",id:"how-to-securely-upgrade-agora-cl",children:[]},{value:"How to securely downgrade Agora-cl",id:"how-to-securely-downgrade-agora-cl",children:[{value:"Downgrading between patch versions (v1.0.x)",id:"downgrading-between-patch-versions-v10x",children:[]},{value:"Downgrading between minor versions (v1.x)",id:"downgrading-between-minor-versions-v1x",children:[]},{value:"Downgrading between major version bumps",id:"downgrading-between-major-version-bumps",children:[]}]}],g={toc:h};function k(e){var a=e.components,t=(0,r.Z)(e,u);return(0,n.kt)("wrapper",(0,o.Z)({},g,t,{components:a,mdxType:"MDXLayout"}),(0,n.kt)(l.M,{mdxType:"HeaderBadgesWidget"}),(0,n.kt)("p",null,"This section outlines the step-by-step process for how to keep Agora-cl up to date, how to downgrade versions, and some security recommendations for stakers regarding updates."),(0,n.kt)("h2",{id:"installing-agora-cl"},"Installing Agora-cl"),(0,n.kt)("p",null,"There are three main ways of installing Agora-cl:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/install/install-with-script"},"Using the Agora-cl installation script (Recommended)")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/install/install-with-docker"},"Using Docker")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/docs/install/install-with-bazel"},"Building from source with Bazel (Advanced)"))),(0,n.kt)("h2",{id:"recommended-versions"},"Recommended versions"),(0,n.kt)("p",null,"Regardless of your installation method, we always recommend you are running the latest version in our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page")," on Github, specified in ",(0,n.kt)("a",{parentName:"p",href:"https://semver.org/"},"semver")," format such as ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0-beta.1"),". You can check your Agora-cl version by running your Agora node or validator with the ",(0,n.kt)("inlineCode",{parentName:"p"},"--version")," flag. For example, if using ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh")," to run the Agora node, you would run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"agora-cl.sh beacon-chain --version\n")),(0,n.kt)("p",null,"You should see a message that says ",(0,n.kt)("inlineCode",{parentName:"p"},"Using agora-cl version")," and prints the version number. If you have set environment variable ",(0,n.kt)("inlineCode",{parentName:"p"},"USE_PRYSM_VERSION")," to a specific version, the agora-cl.sh script will not automatically update your client. Unset the environment variable or set it to a recent version, then restart your processes with agora-cl.sh."),(0,n.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Double Check Running Processes")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"Running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh beacon-chain --version")," may not reflect the version of the currently running process. After verifying the version with ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", be sure to check that your process was restarted recently to pick up the latest version. Alternatively, you can query the ",(0,n.kt)("inlineCode",{parentName:"p"},"/metrics")," page for the ",(0,n.kt)("inlineCode",{parentName:"p"},"prysm_version")," value on port ",(0,n.kt)("inlineCode",{parentName:"p"},"8080")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"8081")," for the beacon-chain node and validator node, respectively."))),(0,n.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"Always Run a Stable Release")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"If you are running docker or building from source, we ",(0,n.kt)("strong",{parentName:"p"},"never")," recommend running from the ",(0,n.kt)("inlineCode",{parentName:"p"},":latest")," docker tag nor the ",(0,n.kt)("inlineCode",{parentName:"p"},"master")," branch of Agora-cl. we always recommend using ",(0,n.kt)("inlineCode",{parentName:"p"},":stable")," if running Docker, or using a specific version tag from our latest releases. Likewise for Bazel, we recommend doing a ",(0,n.kt)("inlineCode",{parentName:"p"},"git checkout COMMIT_HASH")," where COMMIT_HASH is for our latest release version"))),(0,n.kt)("h2",{id:"how-to-subscribe-for-updates"},"How to subscribe for updates"),(0,n.kt)("p",null,"Agora-cl has two official channels for release updates: our ",(0,n.kt)("a",{parentName:"p",href:"https://t.me/bosagora_eng"},"Telegram")," and our ",(0,n.kt)("a",{parentName:"p",href:"https://groups.google.com/g/agora-cl-dev"},"mailing list"),". All releases will be notified via those channels, and we always recommend reading our release notes on Github in case there are ",(0,n.kt)("strong",{parentName:"p"},"breaking changes")," to running a node. Our team avoids breaking changes whenever possible, and we will make it clear in our release notes or in releases ahead of time that breaking changes are coming."),(0,n.kt)("h2",{id:"how-to-securely-upgrade-agora-cl"},"How to securely upgrade Agora-cl"),(0,n.kt)("p",null,"Updating in Agora-cl can incur a few seconds downtime depending on your installation method. Every validator will attest once per epoch (every 6.4 minutes on average), while proposals are more rare. To check your next assigned slot to attest or propose, we recommend checking your validator on ",(0,n.kt)("a",{parentName:"p",href:"https://beaconcha.in"},"beaconcha.in"),". Although missing a single validator duty is not a big deal, you can wait to update right after you attest or propose for optimal performance."),(0,n.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,n.kt)("div",{parentName:"div",className:"admonition-heading"},(0,n.kt)("h5",{parentName:"div"},(0,n.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,n.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,n.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Missing a single validator duty is not a big deal")),(0,n.kt)("div",{parentName:"div",className:"admonition-content"},(0,n.kt)("p",{parentName:"div"},"Missing a single duty is really not a big deal for your validator profitability. Unless you want to be at the top of the ",(0,n.kt)("a",{parentName:"p",href:"https://beaconcha.in/validators/leaderboard"},"leaderboard"),", do not worry too much. You will be profitable again in no time once your validator is up next epoch."))),(0,n.kt)(i.Z,{groupId:"operating-systems",defaultValue:"lin",values:[{label:"Linux",value:"lin"},{label:"Windows",value:"win"},{label:"MacOS",value:"mac"},{label:"Arm64",value:"arm"}],mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"lin",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", all it takes to upgrade to the latest release is to stop your Agora node and validator (wait for the process to close down gracefully). Then, restart it with the same command you used to start the process. The script will automatically downloaded our latest release for you."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To update your Agora-cl with Docker, we recommend just pulling our ",(0,n.kt)("inlineCode",{parentName:"p"},":stable")," tag, which will always point to our latest release."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"docker pull bosagora/agora-cl-node:stable\ndocker pull bosagora/agora-cl-validator:stable\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Bazel")),(0,n.kt)("p",null,"To run our latest release with Bazel, you can look up our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", look at the commit hash of the latest release, then do ",(0,n.kt)("inlineCode",{parentName:"p"},"git checkout COMMIT_HASH"),". Afterwards, you can re-run your Agora chain and validator as you ran them earlier with Bazel.")),(0,n.kt)(s.Z,{value:"win",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.bat"),", all it takes to upgrade to the latest release is to stop your Agora node and validator (wait for the process to close down gracefully). Then, restart it with the same command you used to start the process. The script will automatically downloaded our latest release for you."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To update your Agora-cl with Docker, we recommend just pulling our ",(0,n.kt)("inlineCode",{parentName:"p"},":stable")," tag, which will always point to our latest release."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"docker pull bosagora/agora-cl-node:stable\ndocker pull bosagora/agora-cl-validator:stable\n"))),(0,n.kt)(s.Z,{value:"mac",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", all it takes to upgrade to the latest release is to stop your Agora node and validator (wait for the process to close down gracefully). Then, restart it with the same command you used to start the process. The script will automatically downloaded our latest release for you."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To update your Agora-cl with Docker, we recommend just pulling our ",(0,n.kt)("inlineCode",{parentName:"p"},":stable")," tag, which will always point to our latest release."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"docker pull bosagora/agora-cl-node:stable\ndocker pull bosagora/agora-cl-validator:stable\n")),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Bazel")),(0,n.kt)("p",null,"To run our latest release with Bazel, you can look up our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", look at the commit hash of the latest release, then do ",(0,n.kt)("inlineCode",{parentName:"p"},"git checkout COMMIT_HASH"),". Afterwards, you can re-run your Agora chain and validator as you ran them earlier with Bazel.")),(0,n.kt)(s.Z,{value:"arm",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", all it takes to upgrade to the latest release is to stop your Agora node and validator (wait for the process to close down gracefully). Then, restart it with the same command you used to start the process. The script will automatically downloaded our latest release for you."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To update your Agora-cl with Docker, we recommend just pulling our ",(0,n.kt)("inlineCode",{parentName:"p"},":stable")," tag, which will always point to our latest release."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-text"},"docker pull bosagora/agora-cl-node:stable\ndocker pull bosagora/agora-cl-validator:stable\n")))),(0,n.kt)("h2",{id:"how-to-securely-downgrade-agora-cl"},"How to securely downgrade Agora-cl"),(0,n.kt)("p",null,"Sometimes, a new version might not work best for you and could impact your profitability negatively if there is an unforeseen issue in the software. To downgrade, there are a few important steps to keep in mind."),(0,n.kt)("h3",{id:"downgrading-between-patch-versions-v10x"},"Downgrading between patch versions (v1.0.x)"),(0,n.kt)("p",null,"If you are downgrading between ",(0,n.kt)("strong",{parentName:"p"},"patch versions"),", which means only the last number in the version changed, such as ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.5")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.4"),", then follow the instructions below:"),(0,n.kt)(i.Z,{groupId:"operating-systems",defaultValue:"lin",values:[{label:"Linux",value:"lin"},{label:"Windows",value:"win"},{label:"MacOS",value:"mac"},{label:"Arm64",value:"arm"}],mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"lin",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", all it takes to downgrade to a previous release is to stop your Agora node and validator (wait for the process to close down gracefully)."),(0,n.kt)("p",null,"Then, find the Agora-cl version you wish to run from our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", such as v1.0.5, then run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"export USE_PRYSM_VERSION=v1.0.5"),"."),(0,n.kt)("p",null,"Then, restart it with the same command you used to start the process. The script will automatically use the release you specified."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To run a previous Agora-cl version with Docker, choose the release you want to run, then change all your docker run commands to use that version tag. For example, instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:stable"),", do ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:v1.0.5")," if you want to run version v1.0.5."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Bazel")),(0,n.kt)("p",null,"To run our latest release with Bazel, you can look up our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", look at the release tag you want to run, such as v1.0.5, then do ",(0,n.kt)("inlineCode",{parentName:"p"},"git checkout v1.0.5"),". Afterwards, you can re-run your Agora chain and validator as you ran them earlier with Bazel."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Systemd")),(0,n.kt)("p",null,"Edit the systemd files for both validator (",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/systemd/system/validator.service"),") and beacon (",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/systemd/system/beacon.service"),"). The filename  depends on what you used when you installed, if you forgot the name, just ",(0,n.kt)("inlineCode",{parentName:"p"},"ls")," that directory (",(0,n.kt)("inlineCode",{parentName:"p"},"/etc/systemd/system/"),") and edit them both. Add the ",(0,n.kt)("inlineCode",{parentName:"p"},"Environment")," key under the ",(0,n.kt)("inlineCode",{parentName:"p"},"[Service]")," group to have ",(0,n.kt)("inlineCode",{parentName:"p"},"Environment     =  USE_PRYSM_VERSION=v2.0.2")),(0,n.kt)("p",null,"Example for the Agora chain:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"[Unit]\nDescription     = Ethereum Beacon Chain Service\nWants           = network-online.target\nAfter           = network-online.target\n\n[Service]\nType            = simple\nUser            = eth\nExecStart       = /home/eth/agora-cl/agora-cl.sh beacon-chain --config-file=/etc/agora-cl-node.yaml\nRestart         = on-failure\nTimeoutStopSec  = 900\nEnvironment     = USE_PRYSM_VERSION=v2.0.2\n\n[Install]\nWantedBy    = multi-user.target\n")),(0,n.kt)("p",null,"After you finish editing both of the files, you need to reload the service unit"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"sudo systemctl daemon-reload\n")),(0,n.kt)("p",null,"Once you do that, the agora-cl beacon and validator are locked in that version, so you need to always update it. If you want to go back to the automatic upgrades after reboot, you just need to remove the ",(0,n.kt)("inlineCode",{parentName:"p"},"Environment")," key.")),(0,n.kt)(s.Z,{value:"win",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.bat"),", all it takes to downgrade to a previous release is to stop your Agora node and validator (wait for the process to close down gracefully)."),(0,n.kt)("p",null,"Then, find the Agora-cl version you wish to run from our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", such as v1.0.5, then run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"set USE_PRYSM_VERSION=v1.0.5"),"."),(0,n.kt)("p",null,"Then, restart it with the same command you used to start the process. The script will automatically use the release you specified."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To run a previous Agora-cl version with Docker, choose the release you want to run, then change all your docker run commands to use that version tag. For example, instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:stable"),", do ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:v1.0.5")," if you want to run version v1.0.5.")),(0,n.kt)(s.Z,{value:"mac",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", all it takes to downgrade to a previous release is to stop your Agora node and validator (wait for the process to close down gracefully)."),(0,n.kt)("p",null,"Then, find the Agora-cl version you wish to run from our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", such as v1.0.5, then run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"export USE_PRYSM_VERSION=v1.0.5"),"."),(0,n.kt)("p",null,"Then, restart it with the same command you used to start the process. The script will automatically use the release you specified."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To run a previous Agora-cl version with Docker, choose the release you want to run, then change all your docker run commands to use that version tag. For example, instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:stable"),", do ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:v1.0.5")," if you want to run version v1.0.5."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Bazel")),(0,n.kt)("p",null,"To run our latest release with Bazel, you can look up our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", look at the release tag you want to run, such as v1.0.5, then do ",(0,n.kt)("inlineCode",{parentName:"p"},"git checkout v1.0.5"),". Afterwards, you can re-run your Agora chain and validator as you ran them earlier with Bazel.")),(0,n.kt)(s.Z,{value:"arm",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", all it takes to downgrade to a previous release is to stop your Agora node and validator (wait for the process to close down gracefully)."),(0,n.kt)("p",null,"Then, find the Agora-cl version you wish to run from our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", such as v1.0.5, then run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"set=USE_PRYSM_VERSION=v1.0.5"),"."),(0,n.kt)("p",null,"Then, restart it with the same command you used to start the process. The script will automatically use the release you specified."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To run a previous Agora-cl version with Docker, choose the release you want to run, then change all your docker run commands to use that version tag. For example, instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:stable"),", do ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:v1.0.5")," if you want to run version v1.0.5."))),(0,n.kt)("h3",{id:"downgrading-between-minor-versions-v1x"},"Downgrading between minor versions (v1.x)"),(0,n.kt)("p",null,"If you are downgrading between ",(0,n.kt)("strong",{parentName:"p"},"minor versions"),", meaning the middle number in the version has changed, such as ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.1.0")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.x"),", then follow the instructions below carefully:"),(0,n.kt)(i.Z,{groupId:"operating-systems",defaultValue:"lin",values:[{label:"Linux",value:"lin"},{label:"Windows",value:"win"},{label:"MacOS",value:"mac"},{label:"Arm64",value:"arm"}],mdxType:"Tabs"},(0,n.kt)(s.Z,{value:"lin",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", first stop your Agora node and validator (wait for the process to close down gracefully)."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"agora-cl.sh validator db migrate down --datadir=/path/to/folder\n")),(0,n.kt)("p",null,"Then, find the Agora-cl version you wish to run from our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", such as v1.0.5, then run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"set=USE_PRYSM_VERSION=v1.0.5"),"."),(0,n.kt)("p",null,"Then, restart it with the same command you used to start the process. The script will automatically use the release you specified."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To run a previous Agora-cl version with Docker, choose the release you want to run, such as v1.0.5."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"docker run -v /path/to/folder:/data bosagora/agora-cl-validator:stable db migrate down --datadir=/data\n")),(0,n.kt)("p",null,"Then change all your docker run commands to use that version tag. For example, instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:stable"),", do ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:v1.0.5")," if you want to run version v1.0.5."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Bazel")),(0,n.kt)("p",null,"To run our latest release with Bazel, you can look up our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", look at the release tag you want to run, such as v1.0.5."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"bazel run //validator:validator -- db migrate down --datadir=/path/to/folder\n")),(0,n.kt)("p",null,"Then do ",(0,n.kt)("inlineCode",{parentName:"p"},"git checkout v1.0.5"),". Afterwards, you can re-run your Agora chain and validator as you ran them earlier with Bazel.")),(0,n.kt)(s.Z,{value:"win",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.bat"),", first stop your Agora node and validator (wait for the process to close down gracefully)."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"agora-cl.bat validator db migrate down --datadir=\\path\\to\\folder\n")),(0,n.kt)("p",null,"Then, find the Agora-cl version you wish to run from our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", such as v1.0.5, then run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"set USE_PRYSM_VERSION=v1.0.5"),"."),(0,n.kt)("p",null,"Then, restart it with the same command you used to start the process. The script will automatically use the release you specified."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To run a previous Agora-cl version with Docker, choose the release you want to run, such as v1.0.5."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"docker run -v \\path\\to\\folder:/data bosagora/agora-cl-validator:stable db migrate down --datadir=/data\n")),(0,n.kt)("p",null,"Then change all your docker run commands to use that version tag. For example, instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:stable"),", do ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:v1.0.5")," if you want to run version v1.0.5.")),(0,n.kt)(s.Z,{value:"mac",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", first stop your Agora node and validator (wait for the process to close down gracefully)."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"agora-cl.sh validator db migrate down --datadir=/path/to/folder\n")),(0,n.kt)("p",null,"Then, find the Agora-cl version you wish to run from our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", such as v1.0.5, then run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"export USE_PRYSM_VERSION=v1.0.5"),"."),(0,n.kt)("p",null,"Then, restart it with the same command you used to start the process. The script will automatically use the release you specified."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To run a previous Agora-cl version with Docker, choose the release you want to run, such as v1.0.5."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"docker run -v /path/to/folder:/data bosagora/agora-cl-validator:stable db migrate down --datadir=/data\n")),(0,n.kt)("p",null,"Then change all your docker run commands to use that version tag. For example, instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:stable"),", do ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:v1.0.5")," if you want to run version v1.0.5."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Bazel")),(0,n.kt)("p",null,"To run our latest release with Bazel, you can look up our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", look at the release tag you want to run, such as v1.0.5."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"bazel run //validator:validator -- db migrate down --datadir=/path/to/folder\n")),(0,n.kt)("p",null,"Then do ",(0,n.kt)("inlineCode",{parentName:"p"},"git checkout v1.0.5"),". Afterwards, you can re-run your Agora chain and validator as you ran them earlier with Bazel.")),(0,n.kt)(s.Z,{value:"arm",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using the Agora-cl installation script")),(0,n.kt)("p",null,"If you are running ",(0,n.kt)("inlineCode",{parentName:"p"},"agora-cl.sh"),", first stop your Agora node and validator (wait for the process to close down gracefully)."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"agora-cl.sh validator db migrate down --datadir=/path/to/folder\n")),(0,n.kt)("p",null,"Then, find the Agora-cl version you wish to run from our ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/zeroone-boa/agora-cl/releases"},"releases page"),", such as v1.0.5, then run the command ",(0,n.kt)("inlineCode",{parentName:"p"},"set=USE_PRYSM_VERSION=v1.0.5"),"."),(0,n.kt)("p",null,"Then, restart it with the same command you used to start the process. The script will automatically use the release you specified."),(0,n.kt)("p",null,(0,n.kt)("strong",{parentName:"p"},"Using Docker")),(0,n.kt)("p",null,"To run a previous Agora-cl version with Docker, choose the release you want to run, such as v1.0.5."),(0,n.kt)("p",null,"Next, we recommend backing up any important important folders such as your Agora node data directory and the validator wallet is important. You can simply make copies of the directories and keep them safe in case the downgrade process goes wrong."),(0,n.kt)("p",null,"Next up, run our database rollback command to make sure your database is going to be compatible with your new version. Find the folder where your ",(0,n.kt)("inlineCode",{parentName:"p"},"validator.db")," file lives (it is in your wallet directory under a folder called ",(0,n.kt)("inlineCode",{parentName:"p"},"direct")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"derived"),"), then run:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"docker run -v /path/to/folder:/data bosagora/agora-cl-validator:stable db migrate down --datadir=/data\n")),(0,n.kt)("p",null,"Then change all your docker run commands to use that version tag. For example, instead of ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:stable"),", do ",(0,n.kt)("inlineCode",{parentName:"p"},"docker run bosagora/agora-cl:v1.0.5")," if you want to run version v1.0.5."))),(0,n.kt)("h3",{id:"downgrading-between-major-version-bumps"},"Downgrading between major version bumps"),(0,n.kt)("p",null,"For ",(0,n.kt)("strong",{parentName:"p"},"major version bumps")," such as from ",(0,n.kt)("inlineCode",{parentName:"p"},"v1.0.0")," to ",(0,n.kt)("inlineCode",{parentName:"p"},"v2.0.0"),", you cannot downgrade as these are meant to be backwards incompatible changes."),(0,n.kt)(d.M,{mdxType:"RequestUpdateWidget"}))}k.isMDXComponent=!0}}]);