"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3165],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=c(a),u=r,m=h["".concat(l,".").concat(u)]||h[u]||p[u]||o;return a?n.createElement(m,i(i({ref:t},d),{},{components:a})):n.createElement(m,i({ref:t},d))}));function u(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=a[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},1262:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(7294),r=a(2263);const o=function(e){var t=e.children,a=e.fallback;return(0,r.Z)().isClient&&null!=t?n.createElement(n.Fragment,null,t()):a||null}},5505:(e,t,a)=>{a.d(t,{M:()=>o});var n=a(7294),r=a(1262),o=function(e){var t=e.commaDelimitedContributors,a=e.lastVerifiedDateString,o=e.lastVerifiedVersionString,i={Chris:"hewison-chris"},s=function(e){return n.createElement("a",{class:"header-badge",href:"https://github.com/"+i[e]},n.createElement("span",{class:"badge-avatar",style:{backgroundImage:"url('https://avatars.githubusercontent.com/"+i[e]+"')"}}),n.createElement("span",{class:"badge-label"},e))};return n.createElement(r.Z,null,(function(){return n.createElement("div",{class:"header-badges"},null!=t?t.split(",").map(s):null,function(e,t){if(null!=e&&null!=t)return n.createElement("a",{class:"header-badge"},n.createElement("span",{class:"badge-avatar emoji-avatar"},"\u2714\ufe0f"),n.createElement("span",{class:"badge-label"},"Last verified on ",n.createElement("strong",null,e)," using Agora-cl ",t))}(a,o),n.createElement("a",{class:"header-badge",href:"https://github.com/Bosagora/documentation/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},n.createElement("span",{class:"badge-avatar emoji-avatar"},"\u270f\ufe0f"),n.createElement("span",{class:"badge-label"},"Request an update")))}))}},1144:(e,t,a)=>{a.d(t,{M:()=>o});var n=a(7294),r=a(1262),o=function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),n.createElement(r.Z,null,(function(){return n.createElement("div",{class:"update-request"},n.createElement("a",{href:"https://https://github.com/zeroone-boa/agora-cl-docs/issues/new?title=Docs update request: "+new URL(window.location.href).pathname+"&body=Source: "+window.location.href+"%0A%0ARequest: (how can we help?)"},"\ud83d\udc3c Request an update"))}))}},4598:(e,t,a)=>{a.r(t),a.d(t,{contentTitle:()=>d,default:()=>m,frontMatter:()=>c,metadata:()=>p,toc:()=>h});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),i=a(5505),s=a(1144),l=["components"],c={id:"ethereum-public-api",title:"Eth Beacon Node API",sidebar_label:"Eth Beacon Node API",description:"This section contains information about the official Agora-cl API"},d=void 0,p={unversionedId:"how-agora-cl-works/ethereum-public-api",id:"how-agora-cl-works/ethereum-public-api",isDocsHomePage:!1,title:"Eth Beacon Node API",description:"This section contains information about the official Agora-cl API",source:"@site/docs/how-agora-cl-works/ethereum-public-api.md",sourceDirName:"how-agora-cl-works",slug:"/how-agora-cl-works/ethereum-public-api",permalink:"/docs/how-agora-cl-works/ethereum-public-api",editUrl:"https://github.com/zeroone-boa/agora-cl-docs/edit/master/website/docs/how-agora-cl-works/ethereum-public-api.md",version:"current",frontMatter:{id:"ethereum-public-api",title:"Eth Beacon Node API",sidebar_label:"Eth Beacon Node API",description:"This section contains information about the official Agora-cl API"},sidebar:"docs",previous:{title:"About Bazel",permalink:"/docs/reading/bazel"},next:{title:"Agora-cl-specific API",permalink:"/docs/how-agora-cl-works/agora-cl-public-api"}},h=[{value:"Performing requests against a local Agora-cl node",id:"performing-requests-against-a-local-agora-cl-node",children:[]},{value:"Disabling the API",id:"disabling-the-api",children:[]},{value:"Tips and Recommendations",id:"tips-and-recommendations",children:[]}],u={toc:h};function m(e){var t=e.components,a=(0,r.Z)(e,l);return(0,o.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(i.M,{mdxType:"HeaderBadgesWidget"}),(0,o.kt)("p",null,"Agora-cl supports the official ",(0,o.kt)("a",{parentName:"p",href:"https://ethereum.github.io/beacon-APIs/"},"Eth Beacon Node API specification"),", the official API standard developed by the Ethereum R&D team. The specification describes a RESTful set of endpoints which should be implemented by an Eth Agora node or a third-party service. This reduces the overhead of having to learn a new set of APIs when trying out a different client, and it allows network participants to reliably talk to each other over HTTP. As an example of an external service implementing the spec, Infura's Agora chain API is described ",(0,o.kt)("a",{parentName:"p",href:"https://infura.io/docs/eth2#tag/Beacon"},"here"),"."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"The official Ethereum specification contains multiple definitions")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"As of the time of writing, there are three definitions: ",(0,o.kt)("a",{parentName:"p",href:"https://ethereum.github.io/beacon-APIs/?urls.primaryName=v1"},"v1"),", ",(0,o.kt)("a",{parentName:"p",href:"https://ethereum.github.io/beacon-APIs/"},"v2.0.0")," and ",(0,o.kt)("a",{parentName:"p",href:"https://ethereum.github.io/beacon-APIs/?urls.primaryName=dev"},"dev"),". ",(0,o.kt)("inlineCode",{parentName:"p"},"dev")," is an unstable version and supporting it is ",(0,o.kt)("strong",{parentName:"p"},"not")," to be expected."))),(0,o.kt)("h2",{id:"performing-requests-against-a-local-agora-cl-node"},"Performing requests against a local Agora-cl node"),(0,o.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Do not publicly expose the API")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"The API's purpose is a means of communication between your Agora node and your validator client. Because of this it is not protected against external malicious users. Some endpoints are vulnerable to Denial-of-Service attacks, while others may disclose information about your Agora node. The communication between the Agora node and the validator client should be done privately, either on the same machine or through an SSH connection."))),(0,o.kt)("p",null,"The API is exposed by default on ",(0,o.kt)("inlineCode",{parentName:"p"},"127.0.0.1:3500"),". The host can be changed by manipulating the ",(0,o.kt)("inlineCode",{parentName:"p"},"--grpc-gateway-host")," flag and the port can be modified with the ",(0,o.kt)("inlineCode",{parentName:"p"},"--grpc-gateway-port")," flag. Performing a request is straightforward - simply concatenate the host with the port and the API's URL, providing any required URL and query parameters. As an example, the finalized state's root can be obtained using:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"http://127.0.0.1:3500/eth/v1/beacon/states/finalized/root\n")),(0,o.kt)("p",null,"Notice that in this example the ",(0,o.kt)("inlineCode",{parentName:"p"},"{state_id}")," URL parameter has been replaced with the literal value ",(0,o.kt)("inlineCode",{parentName:"p"},"finalized"),". Please read the specification carefully to understand how each endpoint behaves."),(0,o.kt)("h2",{id:"disabling-the-api"},"Disabling the API"),(0,o.kt)("p",null,"By default the Agora node runs with all available set of APIs enabled. You might want to disable one or more APIs, for example for security reasons. The ",(0,o.kt)("inlineCode",{parentName:"p"},"--http-modules")," flags allows fine-grained control over which APIs are available on your node."),(0,o.kt)("h2",{id:"tips-and-recommendations"},"Tips and Recommendations"),(0,o.kt)("p",null,"If you're experiencing timeouts when using endpoints that require passing a ",(0,o.kt)("inlineCode",{parentName:"p"},"state_id"),", such as ",(0,o.kt)("inlineCode",{parentName:"p"},"/eth/v1/beacon/states/{state_id}/validators"),", and you pass in a state more than a few epochs in the past, consider lowering the value of the ",(0,o.kt)("inlineCode",{parentName:"p"},"--slots-per-archive-point")," flag. The smaller the value, the faster it is to fetch states. For historical state fetching we recommend setting the value to ",(0,o.kt)("inlineCode",{parentName:"p"},"64")," or even ",(0,o.kt)("inlineCode",{parentName:"p"},"32"),". Mind you that decreasing the value will result in the beacon DB taking much more space. Unfortunately there's a trade-off between speed and storage size."),(0,o.kt)(s.M,{mdxType:"RequestUpdateWidget"}))}m.isMDXComponent=!0}}]);